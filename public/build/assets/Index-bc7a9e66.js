import{a as e,j as i,b as v,r as h}from"./app-106109f1.js";import{A as N}from"./AuthenticatedLayout-d3729d0b.js";import{P as p}from"./PrimaryButton-35823b76.js";import{M as b}from"./Modal-c7e8749c.js";import"./ApplicationLogo-7119ef8e.js";import"./transition-2c84bfba.js";function y({currentUser:l,showModal:s,setShowModal:d,setRespUser:m}){let t=null,r=!1;function o(){d(!1),t=null,r=!1}function c(){t===null&&!r?$.notify("No action to apply!"):axios.put("/users/"+l.id,{newRole:t,checked:r}).then(n=>{n.status===200?(m(n.data),$.notify("Changed successfully","success"),o()):$.notify("An error occurred")}).catch(n=>{console.log(n),$.notify(n)})}return e("div",{children:e(b,{onClose:o,show:s,children:i("div",{className:"px-6 py-6",children:[i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Name: "}),e("span",{children:l.name})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Email: "}),e("span",{children:l.email})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Role: "}),e("span",{className:"mr-4",children:l.role}),e("label",{className:"mr-4",children:"Change Role:"}),i("select",{defaultValue:l.role,onChange:n=>{t=n.target.value},children:[e("option",{value:"admin",children:"Admin"}),e("option",{value:"supervisor",children:"Supervisor"}),e("option",{value:"employee",children:"Employee"}),e("option",{value:"provisional",children:"Provisional"})]})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Status: "}),e("span",{className:"mr-8",children:l.deleted_at!==null?"Deactivated":l.role==="provisional"?"Not Approved":"Active"}),e("input",{type:"checkbox",defaultChecked:!1,onChange:n=>{r=n.target.checked}}),e("label",{className:"ml-3",children:l.deleted_at!==null?"Activate":"Deactivate"})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Email Verified: "}),e("span",{children:l.email_verified_at===null?"No":"Yes"})]}),i("div",{children:[e(p,{className:"mr-6",onClick:()=>{c()},children:"Apply"}),e(p,{className:"bg-red-600 hover:bg-red-600",onClick:()=>{o()},children:"Cancel"})]})]})})})}function g({fetchedUsers:l}){const[s,d]=h.useState(Object.fromEntries(new Map(l.map(a=>[a.id,a])))),[m,t]=h.useState(!1),[r,o]=h.useState(l[0]),[c,n]=h.useState(null);h.useEffect(()=>{c!==null&&d({...s,[c.id]:c})},[c]);const u="viewUsersTable";$(document).ready(function(){$("#"+u).DataTable({columnDefs:[{searchable:!1,targets:[5]}],bDestroy:!0})});function f(a){o(a),t(!0)}return i("div",{children:[e(y,{showModal:m,setShowModal:t,currentUser:r,setRespUser:n}),i("table",{id:u,className:"cell-border hover",children:[e("thead",{children:i("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Email"}),e("th",{children:"Role"}),e("th",{children:"Status"}),e("th",{children:"Email Verified"}),e("th",{})]})}),e("tbody",{children:Object.values(s).map(a=>i("tr",{children:[e("td",{children:a.name}),e("td",{children:a.email}),e("td",{children:a.role}),e("td",{children:a.deleted_at!==null?"Deactivated":a.role==="provisional"?"Not Approved":"Active"}),e("td",{children:a.email_verified_at===null?"No":"Yes"}),e("th",{children:e(p,{onClick:()=>{f(a)},children:"EDIT"})})]},a.id))})]})]})}function S({auth:l,users:s}){let d={...l.user,isAdmin:l.user.role==="admin"};return i(N,{user:d,children:[e(v,{title:"Users"}),e("div",{className:"mx-auto p-4 sm:p-6 lg:p-8 bg-white",children:e(g,{fetchedUsers:s})})]})}export{S as default};

import{r as N,c as Ne,g as je,a as n,j as l,F as Y,b as $n}from"./app-021d92c0.js";import{A as Fn}from"./AuthenticatedLayout-af63a0c5.js";import{M as qe}from"./Modal-255c67c6.js";import{P as he}from"./PrimaryButton-80953a20.js";import"./ApplicationLogo-e047eb62.js";import"./transition-5af3369f.js";var Ce={exports:{}};/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */Ce.exports;(function(c,d){(function(a,D){c.exports=D(N)})(self,a=>(()=>{var D={703:(s,h,y)=>{var v=y(414);function C(){}function z(){}z.resetWarningCache=C,s.exports=function(){function w(I,q,H,E,k,F){if(F!==v){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}function O(){return w}w.isRequired=w;var L={array:w,bigint:w,bool:w,func:w,number:w,object:w,string:w,symbol:w,any:w,arrayOf:O,element:w,elementType:w,instanceOf:O,node:w,objectOf:O,oneOf:O,oneOfType:O,shape:O,exact:O,checkPropTypes:z,resetWarningCache:C};return L.PropTypes=L,L}},697:(s,h,y)=>{s.exports=y(703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},787:s=>{s.exports=a}},P={};function g(s){var h=P[s];if(h!==void 0)return h.exports;var y=P[s]={exports:{}};return D[s](y,y.exports,g),y.exports}g.n=s=>{var h=s&&s.__esModule?()=>s.default:()=>s;return g.d(h,{a:h}),h},g.d=(s,h)=>{for(var y in h)g.o(h,y)&&!g.o(s,y)&&Object.defineProperty(s,y,{enumerable:!0,get:h[y]})},g.o=(s,h)=>Object.prototype.hasOwnProperty.call(s,h),g.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var W={};return(()=>{g.r(W),g.d(W,{CKEditor:()=>de,CKEditorContext:()=>Ue});var s=g(787),h=g.n(s),y=g(697),v=g.n(y);const C=new Array(256).fill("").map((e,t)=>("0"+t.toString(16)).slice(-2));class z{constructor(t){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=r=>{const o="error"in r?r.error:r.reason;o instanceof Error&&this._handleError(o,r)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,r){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(r)}off(t,r){this._listeners[t]=this._listeners[t].filter(o=>o!==r)}_fire(t,...r){const o=this._listeners[t]||[];for(const i of o)i.apply(this,[null,...r])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,r){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:r instanceof ErrorEvent?r.filename:void 0,lineno:r instanceof ErrorEvent?r.lineno:void 0,colno:r instanceof ErrorEvent?r.colno:void 0,date:this._now()});const o=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:o}),o?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function w(e,t=new Set){const r=[e],o=new Set;let i=0;for(;r.length>i;){const u=r[i++];if(!o.has(u)&&O(u)&&!t.has(u))if(o.add(u),Symbol.iterator in u)try{for(const p of u)r.push(p)}catch{}else for(const p in u)p!=="defaultValue"&&r.push(u[p])}return o}function O(e){const t=Object.prototype.toString.call(e),r=typeof e;return!(r==="number"||r==="boolean"||r==="string"||r==="symbol"||r==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||e==null||e._watchdogExcluded||e instanceof EventTarget||e instanceof Event)}function L(e,t,r=new Set){if(e===t&&typeof(o=e)=="object"&&o!==null)return!0;var o;const i=w(e,r),u=w(t,r);for(const p of i)if(u.has(p))return!0;return!1}const I=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},q=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne;var H=typeof self=="object"&&self&&self.Object===Object&&self;const E=q||H||Function("return this")(),k=function(){return E.Date.now()};var F=/\s/;const x=function(e){for(var t=e.length;t--&&F.test(e.charAt(t)););return t};var b=/^\s+/;const f=function(e){return e&&e.slice(0,x(e)+1).replace(b,"")},_=E.Symbol;var j=Object.prototype,A=j.hasOwnProperty,U=j.toString,fe=_?_.toStringTag:void 0;const Ft=function(e){var t=A.call(e,fe),r=e[fe];try{e[fe]=void 0;var o=!0}catch{}var i=U.call(e);return o&&(t?e[fe]=r:delete e[fe]),i};var Lt=Object.prototype.toString;const Ut=function(e){return Lt.call(e)};var He=_?_.toStringTag:void 0;const X=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":He&&He in Object(e)?Ft(e):Ut(e)},J=function(e){return e!=null&&typeof e=="object"},Bt=function(e){return typeof e=="symbol"||J(e)&&X(e)=="[object Symbol]"};var qt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Vt=/^0o[0-7]+$/i,Qt=parseInt;const Ve=function(e){if(typeof e=="number")return e;if(Bt(e))return NaN;if(I(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=I(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=f(e);var r=Ht.test(e);return r||Vt.test(e)?Qt(e.slice(2),r?2:8):qt.test(e)?NaN:+e};var Kt=Math.max,Gt=Math.min;const Yt=function(e,t,r){var o,i,u,p,m,M,R=0,Ee=!1,re=!1,Q=!0;if(typeof e!="function")throw new TypeError("Expected a function");function ue(B){var G=o,oe=i;return o=i=void 0,R=B,p=e.apply(oe,G)}function ge(B){var G=B-M;return M===void 0||G>=t||G<0||re&&B-R>=u}function ne(){var B=k();if(ge(B))return V(B);m=setTimeout(ne,function(G){var oe=t-(G-M);return re?Gt(oe,u-(G-R)):oe}(B))}function V(B){return m=void 0,Q&&o?ue(B):(o=i=void 0,p)}function K(){var B=k(),G=ge(B);if(o=arguments,i=this,M=B,G){if(m===void 0)return function(oe){return R=oe,m=setTimeout(ne,t),Ee?ue(oe):p}(M);if(re)return clearTimeout(m),m=setTimeout(ne,t),ue(M)}return m===void 0&&(m=setTimeout(ne,t)),p}return t=Ve(t)||0,I(r)&&(Ee=!!r.leading,u=(re="maxWait"in r)?Kt(Ve(r.maxWait)||0,t):u,Q="trailing"in r?!!r.trailing:Q),K.cancel=function(){m!==void 0&&clearTimeout(m),R=0,o=M=i=m=void 0},K.flush=function(){return m===void 0?p:V(k())},K},Jt=function(e,t,r){var o=!0,i=!0;if(typeof e!="function")throw new TypeError("Expected a function");return I(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),Yt(e,t,{leading:o,maxWait:t,trailing:i})},Xt=function(){this.__data__=[],this.size=0},Qe=function(e,t){return e===t||e!=e&&t!=t},ve=function(e,t){for(var r=e.length;r--;)if(Qe(e[r][0],t))return r;return-1};var Zt=Array.prototype.splice;const er=function(e){var t=this.__data__,r=ve(t,e);return!(r<0)&&(r==t.length-1?t.pop():Zt.call(t,r,1),--this.size,!0)},tr=function(e){var t=this.__data__,r=ve(t,e);return r<0?void 0:t[r][1]},rr=function(e){return ve(this.__data__,e)>-1},nr=function(e,t){var r=this.__data__,o=ve(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this};function ie(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}ie.prototype.clear=Xt,ie.prototype.delete=er,ie.prototype.get=tr,ie.prototype.has=rr,ie.prototype.set=nr;const _e=ie,or=function(){this.__data__=new _e,this.size=0},ir=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},sr=function(e){return this.__data__.get(e)},ar=function(e){return this.__data__.has(e)},Ke=function(e){if(!I(e))return!1;var t=X(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Se=E["__core-js_shared__"];var Ge=function(){var e=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const cr=function(e){return!!Ge&&Ge in e};var lr=Function.prototype.toString;const Z=function(e){if(e!=null){try{return lr.call(e)}catch{}try{return e+""}catch{}}return""};var dr=/^\[object .+?Constructor\]$/,ur=Function.prototype,hr=Object.prototype,fr=ur.toString,pr=hr.hasOwnProperty,mr=RegExp("^"+fr.call(pr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const yr=function(e){return!(!I(e)||cr(e))&&(Ke(e)?mr:dr).test(Z(e))},br=function(e,t){return e==null?void 0:e[t]},ee=function(e,t){var r=br(e,t);return yr(r)?r:void 0},pe=ee(E,"Map"),me=ee(Object,"create"),gr=function(){this.__data__=me?me(null):{},this.size=0},vr=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var _r=Object.prototype.hasOwnProperty;const wr=function(e){var t=this.__data__;if(me){var r=t[e];return r==="__lodash_hash_undefined__"?void 0:r}return _r.call(t,e)?t[e]:void 0};var xr=Object.prototype.hasOwnProperty;const Er=function(e){var t=this.__data__;return me?t[e]!==void 0:xr.call(t,e)},Nr=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=me&&t===void 0?"__lodash_hash_undefined__":t,this};function se(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}se.prototype.clear=gr,se.prototype.delete=vr,se.prototype.get=wr,se.prototype.has=Er,se.prototype.set=Nr;const Ye=se,jr=function(){this.size=0,this.__data__={hash:new Ye,map:new(pe||_e),string:new Ye}},Cr=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},we=function(e,t){var r=e.__data__;return Cr(t)?r[typeof t=="string"?"string":"hash"]:r.map},Sr=function(e){var t=we(this,e).delete(e);return this.size-=t?1:0,t},Ar=function(e){return we(this,e).get(e)},Tr=function(e){return we(this,e).has(e)},Or=function(e,t){var r=we(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this};function ae(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}ae.prototype.clear=jr,ae.prototype.delete=Sr,ae.prototype.get=Ar,ae.prototype.has=Tr,ae.prototype.set=Or;const kr=ae,Pr=function(e,t){var r=this.__data__;if(r instanceof _e){var o=r.__data__;if(!pe||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new kr(o)}return r.set(e,t),this.size=r.size,this};function ce(e){var t=this.__data__=new _e(e);this.size=t.size}ce.prototype.clear=or,ce.prototype.delete=ir,ce.prototype.get=sr,ce.prototype.has=ar,ce.prototype.set=Pr;const Rr=ce,Mr=function(e,t){for(var r=-1,o=e==null?0:e.length;++r<o&&t(e[r],r,e)!==!1;);return e},Je=function(){try{var e=ee(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Xe=function(e,t,r){t=="__proto__"&&Je?Je(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var Dr=Object.prototype.hasOwnProperty;const Ze=function(e,t,r){var o=e[t];Dr.call(e,t)&&Qe(o,r)&&(r!==void 0||t in e)||Xe(e,t,r)},xe=function(e,t,r,o){var i=!r;r||(r={});for(var u=-1,p=t.length;++u<p;){var m=t[u],M=o?o(r[m],e[m],m,r,e):void 0;M===void 0&&(M=e[m]),i?Xe(r,m,M):Ze(r,m,M)}return r},Wr=function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o},et=function(e){return J(e)&&X(e)=="[object Arguments]"};var tt=Object.prototype,Ir=tt.hasOwnProperty,zr=tt.propertyIsEnumerable;const $r=et(function(){return arguments}())?et:function(e){return J(e)&&Ir.call(e,"callee")&&!zr.call(e,"callee")},Ae=Array.isArray,Fr=function(){return!1};var rt=d&&!d.nodeType&&d,nt=rt&&!0&&c&&!c.nodeType&&c,ot=nt&&nt.exports===rt?E.Buffer:void 0;const it=(ot?ot.isBuffer:void 0)||Fr;var Lr=/^(?:0|[1-9]\d*)$/;const Ur=function(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&(r=="number"||r!="symbol"&&Lr.test(e))&&e>-1&&e%1==0&&e<t},st=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991};var T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object Boolean]"]=T["[object DataView]"]=T["[object Date]"]=T["[object Error]"]=T["[object Function]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object WeakMap]"]=!1;const Br=function(e){return J(e)&&st(e.length)&&!!T[X(e)]},Te=function(e){return function(t){return e(t)}};var at=d&&!d.nodeType&&d,ye=at&&!0&&c&&!c.nodeType&&c,Oe=ye&&ye.exports===at&&q.process;const le=function(){try{var e=ye&&ye.require&&ye.require("util").types;return e||Oe&&Oe.binding&&Oe.binding("util")}catch{}}();var ct=le&&le.isTypedArray;const qr=ct?Te(ct):Br;var Hr=Object.prototype.hasOwnProperty;const lt=function(e,t){var r=Ae(e),o=!r&&$r(e),i=!r&&!o&&it(e),u=!r&&!o&&!i&&qr(e),p=r||o||i||u,m=p?Wr(e.length,String):[],M=m.length;for(var R in e)!t&&!Hr.call(e,R)||p&&(R=="length"||i&&(R=="offset"||R=="parent")||u&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||Ur(R,M))||m.push(R);return m};var Vr=Object.prototype;const ke=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Vr)},dt=function(e,t){return function(r){return e(t(r))}},Qr=dt(Object.keys,Object);var Kr=Object.prototype.hasOwnProperty;const Gr=function(e){if(!ke(e))return Qr(e);var t=[];for(var r in Object(e))Kr.call(e,r)&&r!="constructor"&&t.push(r);return t},ut=function(e){return e!=null&&st(e.length)&&!Ke(e)},Pe=function(e){return ut(e)?lt(e):Gr(e)},Yr=function(e,t){return e&&xe(t,Pe(t),e)},Jr=function(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t};var Xr=Object.prototype.hasOwnProperty;const Zr=function(e){if(!I(e))return Jr(e);var t=ke(e),r=[];for(var o in e)(o!="constructor"||!t&&Xr.call(e,o))&&r.push(o);return r},Re=function(e){return ut(e)?lt(e,!0):Zr(e)},en=function(e,t){return e&&xe(t,Re(t),e)};var ht=d&&!d.nodeType&&d,ft=ht&&!0&&c&&!c.nodeType&&c,pt=ft&&ft.exports===ht?E.Buffer:void 0,mt=pt?pt.allocUnsafe:void 0;const tn=function(e,t){if(t)return e.slice();var r=e.length,o=mt?mt(r):new e.constructor(r);return e.copy(o),o},rn=function(e,t){var r=-1,o=e.length;for(t||(t=Array(o));++r<o;)t[r]=e[r];return t},nn=function(e,t){for(var r=-1,o=e==null?0:e.length,i=0,u=[];++r<o;){var p=e[r];t(p,r,e)&&(u[i++]=p)}return u},yt=function(){return[]};var on=Object.prototype.propertyIsEnumerable,bt=Object.getOwnPropertySymbols;const Me=bt?function(e){return e==null?[]:(e=Object(e),nn(bt(e),function(t){return on.call(e,t)}))}:yt,sn=function(e,t){return xe(e,Me(e),t)},gt=function(e,t){for(var r=-1,o=t.length,i=e.length;++r<o;)e[i+r]=t[r];return e},De=dt(Object.getPrototypeOf,Object),vt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)gt(t,Me(e)),e=De(e);return t}:yt,an=function(e,t){return xe(e,vt(e),t)},_t=function(e,t,r){var o=t(e);return Ae(e)?o:gt(o,r(e))},cn=function(e){return _t(e,Pe,Me)},ln=function(e){return _t(e,Re,vt)},We=ee(E,"DataView"),Ie=ee(E,"Promise"),ze=ee(E,"Set"),$e=ee(E,"WeakMap");var wt="[object Map]",xt="[object Promise]",Et="[object Set]",Nt="[object WeakMap]",jt="[object DataView]",dn=Z(We),un=Z(pe),hn=Z(Ie),fn=Z(ze),pn=Z($e),te=X;(We&&te(new We(new ArrayBuffer(1)))!=jt||pe&&te(new pe)!=wt||Ie&&te(Ie.resolve())!=xt||ze&&te(new ze)!=Et||$e&&te(new $e)!=Nt)&&(te=function(e){var t=X(e),r=t=="[object Object]"?e.constructor:void 0,o=r?Z(r):"";if(o)switch(o){case dn:return jt;case un:return wt;case hn:return xt;case fn:return Et;case pn:return Nt}return t});const Fe=te;var mn=Object.prototype.hasOwnProperty;const yn=function(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&mn.call(e,"index")&&(r.index=e.index,r.input=e.input),r},Ct=E.Uint8Array,Le=function(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t},bn=function(e,t){var r=t?Le(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)};var gn=/\w*$/;const vn=function(e){var t=new e.constructor(e.source,gn.exec(e));return t.lastIndex=e.lastIndex,t};var St=_?_.prototype:void 0,At=St?St.valueOf:void 0;const _n=function(e){return At?Object(At.call(e)):{}},wn=function(e,t){var r=t?Le(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},xn=function(e,t,r){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return Le(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return bn(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return wn(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return vn(e);case"[object Symbol]":return _n(e)}};var Tt=Object.create;const En=function(){function e(){}return function(t){if(!I(t))return{};if(Tt)return Tt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Nn=function(e){return typeof e.constructor!="function"||ke(e)?{}:En(De(e))},jn=function(e){return J(e)&&Fe(e)=="[object Map]"};var Ot=le&&le.isMap;const Cn=Ot?Te(Ot):jn,Sn=function(e){return J(e)&&Fe(e)=="[object Set]"};var kt=le&&le.isSet;const An=kt?Te(kt):Sn;var Pt="[object Arguments]",Rt="[object Function]",Mt="[object Object]",S={};S[Pt]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S[Mt]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S[Rt]=S["[object WeakMap]"]=!1;const Tn=function e(t,r,o,i,u,p){var m,M=1&r,R=2&r,Ee=4&r;if(o&&(m=u?o(t,i,u,p):o(t)),m!==void 0)return m;if(!I(t))return t;var re=Ae(t);if(re){if(m=yn(t),!M)return rn(t,m)}else{var Q=Fe(t),ue=Q==Rt||Q=="[object GeneratorFunction]";if(it(t))return tn(t,M);if(Q==Mt||Q==Pt||ue&&!u){if(m=R||ue?{}:Nn(t),!M)return R?an(t,en(m,t)):sn(t,Yr(m,t))}else{if(!S[Q])return u?t:{};m=xn(t,Q,M)}}p||(p=new Rr);var ge=p.get(t);if(ge)return ge;p.set(t,m),An(t)?t.forEach(function(V){m.add(e(V,r,o,V,t,p))}):Cn(t)&&t.forEach(function(V,K){m.set(K,e(V,r,o,K,t,p))});var ne=re?void 0:(Ee?R?ln:cn:R?Re:Pe)(t);return Mr(ne||t,function(V,K){ne&&(V=t[K=V]),Ze(m,K,e(V,r,o,K,t,p))}),m},On=function(e,t){return Tn(e,5,t=typeof t=="function"?t:void 0)};var kn=Function.prototype,Pn=Object.prototype,Dt=kn.toString,Rn=Pn.hasOwnProperty,Mn=Dt.call(Object);const Dn=function(e){if(!J(e)||X(e)!="[object Object]")return!1;var t=De(e);if(t===null)return!0;var r=Rn.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Dt.call(r)==Mn},Wn=function(e){return J(e)&&e.nodeType===1&&!Dn(e)};class Wt extends z{constructor(t,r={}){super(r),this._editor=null,this._throttledSave=Jt(this._save.bind(this),typeof r.saveInterval=="number"?r.saveInterval:5e3),t&&(this._creator=(o,i)=>t.create(o,i)),this._destructor=o=>o.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{if(typeof this._elementOrData=="string")return this.create(this._data,this._config,this._config.context);{const t=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,t,t.context)}}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,r=this._config,o){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=t,this._config=this._cloneEditorConfiguration(r)||{},this._config.context=o,this._creator(t,this._config))).then(i=>{this._editor=i,i.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=i.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=t}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t={};for(const r of this._editor.model.document.getRootNames())t[r]=this._editor.data.get({rootName:r});return t}_isErrorComingFromThisItem(t){return L(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return On(t,(r,o)=>Wn(r)||o==="context"?r:void 0)}}const be=Symbol("MainQueueId");class It extends z{constructor(t,r={}){super(r),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new In,this._watchdogConfig=r,this._creator=o=>t.create(o),this._destructor=o=>o.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(be,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const r=zt(t);return Promise.all(r.map(o=>this._actionQueues.enqueue(o.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let i;if(this._watchdogs.has(o.id))throw new Error(`Item with the given id is already added: '${o.id}'.`);if(o.type==="editor")return i=new Wt(null,this._watchdogConfig),i.setCreator(o.creator),i._setExcludedProperties(this._contextProps),o.destructor&&i.setDestructor(o.destructor),this._watchdogs.set(o.id,i),i.on("error",(u,{error:p,causesRestart:m})=>{this._fire("itemError",{itemId:o.id,error:p}),m&&this._actionQueues.enqueue(o.id,()=>new Promise(M=>{const R=()=>{i.off("restart",R),this._fire("itemRestart",{itemId:o.id}),M()};i.on("restart",R)}))}),i.create(o.sourceElementOrData,o.config,this._context);throw new Error(`Not supported item type: '${o.type}'.`)})))}remove(t){const r=zt(t);return Promise.all(r.map(o=>this._actionQueues.enqueue(o,()=>{const i=this._getWatchdog(o);return this._watchdogs.delete(o),i.destroy()})))}destroy(){return this._actionQueues.enqueue(be,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(be,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=w(this._context),Promise.all(Array.from(this._watchdogs.values()).map(r=>(r._setExcludedProperties(this._contextProps),r.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(r=>r.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const r=this._watchdogs.get(t);if(!r)throw new Error(`Item with the given id was not registered: ${t}.`);return r}_isErrorComingFromThisItem(t){for(const r of this._watchdogs.values())if(r._isErrorComingFromThisItem(t))return!1;return L(this._context,t.context)}}class In{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,r){const o=t===be;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const i=(o?Promise.all(this._queues.values()):Promise.all([this._queues.get(be),this._queues.get(t)])).then(r),u=i.catch(()=>{});return this._queues.set(t,u),i.finally(()=>{this._activeActions--,this._queues.get(t)===u&&this._activeActions===0&&this._onEmptyCallbacks.forEach(p=>p())})}}function zt(e){return Array.isArray(e)?e:[e]}const $t=h().createContext("contextWatchdog");class Ue extends h().Component{constructor(t,r){super(t,r),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(t){return this._shouldComponentUpdate(t)}async _shouldComponentUpdate(t){return t.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(t.config)),t.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(t.config),!0):this.props.children!==t.children}render(){return h().createElement($t.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}async _initializeContextWatchdog(t){this.contextWatchdog=new It(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(r,o)=>{this.props.onError(o.error,{phase:"runtime",willContextRestart:o.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(t).catch(r=>{this.props.onError(r,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}Ue.defaultProps={isLayoutReady:!0,onError:(e,t)=>console.error(e,t)},Ue.propTypes={id:v().string,isLayoutReady:v().bool,context:v().func,watchdogConfig:v().object,config:v().object,onReady:v().func,onError:v().func};const Be="Lock from React integration (@ckeditor/ckeditor5-react)";class de extends h().Component{constructor(t){super(t),this.editorDestructionInProgress=null,this.domContainer=h().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:r}=window;if(r){const[o]=r.split(".").map(Number);o<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.props.disableWatchdog?this.instance:this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(t){return!!this.editor&&(t.id!==this.props.id||t.disableWatchdog!==this.props.disableWatchdog||(this._shouldUpdateEditor(t)&&this.editor.data.set(t.data),"disabled"in t&&(t.disabled?this.editor.enableReadOnlyMode(Be):this.editor.disableReadOnlyMode(Be)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return h().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.props.disableWatchdog?this.instance=await this._createEditor(this.domContainer.current,this._getConfig()):this.watchdog||(this.context instanceof It?this.watchdog=new zn(this.context):this.watchdog=new de._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((t,r)=>this._createEditor(t,r)),this.watchdog.on("error",(t,{error:r,causesRestart:o})=>{(this.props.onError||console.error)(r,{phase:"runtime",willEditorRestart:o})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(t=>{(this.props.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1})}))}_createEditor(t,r){return this.props.editor.create(t,r).then(o=>{"disabled"in this.props&&this.props.disabled&&o.enableReadOnlyMode(Be);const i=o.model.document,u=o.editing.view.document;return i.on("change:data",p=>{this.props.onChange&&this.props.onChange(p,o)}),u.on("focus",p=>{this.props.onFocus&&this.props.onFocus(p,o)}),u.on("blur",p=>{this.props.onBlur&&this.props.onBlur(p,o)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(o)}),o})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(t=>{setTimeout(async()=>this.watchdog?(await this.watchdog.destroy(),this.watchdog=null,t()):this.instance?(await this.instance.destroy(),this.instance=null,t()):void t())})}_shouldUpdateEditor(t){return this.props.data!==t.data&&this.editor.data.get()!==t.data}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),{...t,initialData:t.initialData||this.props.data||""}}}de.contextType=$t,de.propTypes={editor:v().func.isRequired,data:v().string,config:v().object,disableWatchdog:v().bool,watchdogConfig:v().object,onChange:v().func,onReady:v().func,onFocus:v().func,onBlur:v().func,onError:v().func,disabled:v().bool,id:v().any},de._EditorWatchdog=Wt;class zn{constructor(t){this._contextWatchdog=t,this._id=function(){const r=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,u=4294967296*Math.random()>>>0;return"e"+C[r>>0&255]+C[r>>8&255]+C[r>>16&255]+C[r>>24&255]+C[o>>0&255]+C[o>>8&255]+C[o>>16&255]+C[o>>24&255]+C[i>>0&255]+C[i>>8&255]+C[i>>16&255]+C[i>>24&255]+C[u>>0&255]+C[u>>8&255]+C[u>>16&255]+C[u>>24&255]}()}setCreator(t){this._creator=t}create(t,r){return this._contextWatchdog.add({sourceElementOrData:t,config:r,creator:this._creator,id:this._id,type:"editor"})}on(t,r){this._contextWatchdog.on("itemError",(o,{itemId:i,error:u})=>{i===this._id&&r(null,{error:u,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}})(),W})())})(Ce,Ce.exports);var Ln=Ce.exports;class Un{constructor(d){this.loader=d}upload(){return this.loader.file.then(d=>new Promise((a,D)=>{je.post("/upload",{file:d},{forceFormData:!0,onSuccess(P){a({default:P.props.flash.success.urls.default})}})}))}abort(){console.log("abort")}}const Bn=Un;function qn(){const[c,d]=N.useState(!1),[a,D]=N.useState(n("tr",{})),P="filesTable";function g(){axios.get("/upload").then(W=>{D(W.data.map(s=>l("tr",{children:[n("td",{children:s.file_name}),n("td",{children:s.name}),n("td",{children:s.mime_type}),n("td",{children:n("a",{href:"/storage/"+s.path,target:"_blank",children:n("u",{children:"view"})})}),n("td",{children:n("button",{className:"border p-2 inline-flex items-center px-4 py-2 bg-gray-800 border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2",type:"button",onClick:()=>navigator.clipboard.writeText("/storage/"+s.path),children:"Copy Url"})})]},s.id))),d(!0),$(document).ready(function(){$("#"+P).DataTable({columnDefs:[{searchable:!1,targets:[3,4]}]})})})}return l(Y,{children:[n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:g,children:n("span",{className:"hover:text-gray-700",children:"view uploads"})})}),c?l(Y,{children:[n("div",{className:"flex overflow-y-auto fixed inset-10 z-50 outline-none focus:outline-none",children:n("div",{className:"relative w-auto my-6 mx-auto",children:l("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[l("div",{className:"flex items-start justify-between p-2 border-b border-solid border-slate-200 rounded-t",children:[n("h3",{className:"text-3xl font-semibold justify-center p-2",children:"Uploaded Files"}),n("button",{className:"p-2 ml-auto border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>d(!1),children:n("span",{className:"text-black h-6 w-6 text-4xl block outline-none focus:outline-none",children:"×"})})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:P,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",children:[n("thead",{children:l("tr",{children:[n("th",{children:"Filename"}),n("th",{children:"Alias"}),n("th",{children:"Mimetype"}),n("th",{children:"Link"}),n("th",{children:"COPY URL"})]})}),n("tbody",{children:a})]})})})]})})}),n("div",{className:"opacity-25 fixed inset-0 z-40 bg-black",onClick:()=>d(!1)})]}):null]})}function Hn({showTools:c,onClick:d}){return n(Y,{children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:d,children:l("span",{className:"hover:text-gray-700",children:["editor tools",n("span",{children:n("svg",{style:c?{transform:"rotate(180deg)"}:{},className:"ml-2 -mr-0.5 h-4 w-4 inline-flex",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:n("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})})}function Vn({setShowSavePDFModal:c,showSavePDFModal:d}){const[a,D]=N.useState({filename:"",pdfType:"image"}),[P,g]=N.useState(!1);function W(h){D({...a,[h.target.name]:h.target.value})}function s(){if(a.filename.trim().length===0||a.pdfType.trim().length===0)g(!0);else{if(a.pdfType==="image"){let h=document.querySelector(".ck.ck-editor__editable_inline"),y=h.style.border;h.style.removeProperty("border");let v=document.getElementsByClassName("ck-editor__main")[0];html2pdf().set({filename:a.filename+".pdf",image:{type:"jpeg",quality:.98}}).from(v).save(),h.style.border=y}c(!1)}}return n(qe,{onClose:()=>c(!1),show:d,children:l("div",{className:"px-6 py-6",children:[n("label",{className:"mr-2",children:"Enter filename"}),n("input",{name:"filename",type:"text",onInput:W}),n("span",{children:" .pdf"}),n("br",{}),n("br",{}),n("span",{className:"text-red-600",hidden:!P,children:"*Please fill all fields"}),l("div",{children:[n("br",{}),n(he,{className:"mr-6",onClick:s,children:"Download"}),n(he,{className:"bg-red-600 hover:bg-red-600",onClick:()=>c(!1),children:"Cancel"})]})]})})}function Qn({readonly:c,onClick:d}){return n(Y,{children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:d,children:n("span",{className:"hover:text-gray-700",children:c?"Edit":"Readonly"})})})}function Kn({setShowLockModal:c,showLockModal:d,cell:a}){const[D,P]=N.useState(""),[g,W]=N.useState(""),[s,h]=N.useState(!1),[y,v]=N.useState([]),C=a.closest("tr"),z=a.closest("table");function w(){y.forEach(E=>{E.className=g}),H(),loadData(getEditAreaHtml()),O()}function O(){setTimeout(()=>{const E=document.getElementsByClassName("perm-admin"),k=document.getElementsByClassName("perm-supervisor"),F=document.getElementsByClassName("perm-employee");for(let x of E)x.className+=" bg-red-600";for(let x of k)x.className+=" bg-yellow-300";for(let x of F)x.className+=" bg-green-800"},500),setTimeout(()=>{const E=document.getElementsByClassName("perm-admin"),k=document.getElementsByClassName("perm-supervisor"),F=document.getElementsByClassName("perm-employee");for(let x of E)x.className=x.className.replace("bg-red-600","");for(let x of k)x.className=x.className.replace("bg-yellow-300","");for(let x of F)x.className=x.className.replace("bg-green-800","")},3e3)}function L(E){v(E);let k=null,F=!0;E.forEach(x=>{const b=x.className.search("perm-"),f=b===-1?"perm-all":x.className.substring(b).split(" ")[0];k===null?k=f:k!==f&&(F=!1)}),W(F&&k!==null?k:"")}function I(E){const k=E.target.value;if(P(k),k==="Cell")L([a]);else if(k==="Table")L(z.cells);else if(k==="Row")L(C.cells);else if(k==="Column"){const F=a.cellIndex;let x=[];z.rows.forEach(b=>{let f=b.cells[F];f&&x.push(f)}),L(x)}}function q(E){W(E.target.value)}function H(){c(!1),P(""),W(""),h(!1),v([])}return n(qe,{onClose:H,show:d,children:l("div",{className:"px-6 py-6",children:[n("label",{className:"mr-2",children:"Choose Element"}),l("select",{name:"element",onChange:I,value:D,children:[n("option",{value:""}),n("option",{value:"Cell",children:"Cell"}),n("option",{value:"Row",children:"Row"}),n("option",{value:"Column",children:"Column"}),n("option",{value:"Table",children:"Table"})]}),n("br",{}),n("br",{}),l("div",{children:[n("div",{children:"Choose Permissions"}),l("div",{className:"md:flex items-center",children:[n("input",{className:"ml-2 mr-2",type:"radio",name:"permissions",value:"perm-all",checked:g==="perm-all",onChange:q}),n("label",{children:"All"}),n("input",{className:"ml-4 mr-2",type:"radio",name:"permissions",value:"perm-admin",checked:g==="perm-admin",onChange:q}),n("label",{children:"Admin Only"}),n("span",{className:"ml-1 rounded-bl-2xl bg-red-600 h-4 w-4"})]}),n("span",{className:"ml-2",children:"Admin and "}),n("br",{}),l("div",{className:"md:flex items-center",children:[n("input",{className:"ml-2 mr-2",type:"radio",name:"permissions",value:"perm-supervisor",checked:g==="perm-supervisor",onChange:q}),n("label",{children:"Supervisor"}),n("span",{className:"ml-1 rounded-bl-2xl bg-yellow-300 h-4 w-4"}),n("input",{className:"ml-4 mr-2",type:"radio",name:"permissions",value:"perm-employee",checked:g==="perm-employee",onChange:q}),n("label",{children:"Employee"}),n("span",{className:"ml-1 rounded-bl-2xl bg-green-800 h-4 w-4"})]})]}),n("span",{className:"text-red-600",hidden:!s,children:"*Please fill all fields"}),l("div",{children:[n("br",{}),n(he,{className:"mr-6",onClick:w,children:"Apply"}),n(he,{className:"bg-red-600 hover:bg-red-600",onClick:()=>c(!1),children:"Cancel"})]})]})})}function Gn({setShowSaveModal:c,showSaveModal:d,fileDetails:a,setFileDetails:D,edit:P,user:g,selectedShared:W,selected:s,initialMembers:h}){const[y,v]=N.useState(!1),[C,z]=N.useState(!1),[w,O]=N.useState(h),L="membersTable",[I,q]=N.useState({});N.useEffect(()=>{s.current={...s.current,...I}},[I]),N.useEffect(()=>{let b={};Object.values(w).forEach(f=>{W.hasOwnProperty(f.id)||(b[f.id.toString()]=!1)}),s.current={...W,...b}},[w]);function H(b){s.current[b]=!s.current[b],q({[b]:s.current[b]})}function E(){axios.get("/users/create").then(b=>{if(b.status===200){let f=b.data.filter(j=>j.id!==g.id),_={};f.forEach(j=>{_[j.id]=j}),O(_),z(!0),$(document).ready(function(){$("#"+L).DataTable({columnDefs:[{searchable:!1,targets:[3]}]})})}else $.notify("an error occurred")}).catch(b=>{$.notify(b.message)})}function k(){if(a.filename.trim().length===0||a.fileType.trim().length===0)v(!0);else{if(a.id!==null)P();else{let b=Object.keys(s).filter(f=>s[f]).toString();axios.post("/reports",{filename:a.filename,fileType:a.fileType,content:getEditAreaHtml(),share:b.length===0?"0":b}).then(f=>{f.status===200?(D({filename:f.data.filename,fileType:f.data.fileType,id:f.data.id}),$.notify("Saved successfully","success")):$.notify("An error occurred")}).catch(f=>{$.notify(f)})}x()}}function F(b){D({...a,[b.target.name]:b.target.value})}function x(){c(!1),z(!1)}return n(qe,{onClose:x,show:d,children:l("div",{className:"px-6 py-6",children:[n("label",{className:"mr-2",children:"Enter Name"}),n("input",{name:"filename",type:"text",value:a.filename,onInput:F}),n("br",{}),n("br",{}),g.isAdmin&&l(Y,{children:[n("label",{className:"mr-2",children:"As"}),l("select",{name:"fileType",value:a.fileType,onChange:F,children:[n("option",{value:""}),n("option",{value:"report",children:"Report"}),n("option",{value:"template",children:"Template"})]}),n("br",{}),n("br",{})]}),!g.isAdmin&&l("button",{className:"inline-flex items-center py-2 border border-transparent",type:"button",onClick:E,children:[n("span",{className:"hover:text-gray-700 mr-2",children:"Share With:"}),n("span",{children:Object.keys(s.current).filter(b=>s.current[b]).map(b=>w[b].email).toString()})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:L,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",hidden:!C,children:[n("thead",{children:l("tr",{children:[n("th",{children:"Name"}),n("th",{children:"Email"}),n("th",{children:"Role"}),n("th",{children:"Select"})]})}),n("tbody",{children:Object.values(w).map(b=>l("tr",{children:[n("td",{children:b.name}),n("td",{children:b.email}),n("td",{children:b.role}),n("td",{children:n("input",{type:"checkbox",className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500 ",defaultChecked:s.current[b.id],onChange:()=>H([b.id])})})]},b.id))})]})})}),n("span",{className:"text-red-600",hidden:!y,children:"*Please fill all fields"}),l("div",{children:[n("br",{}),n(he,{className:"mr-6",onClick:k,children:"Save"}),n(he,{className:"bg-red-600 hover:bg-red-600",onClick:x,children:"Cancel"})]})]})})}function Yn({user:c}){const[d,a]=N.useState(!1),[D,P]=N.useState(n("tr",{})),g="templatesTable";function W(){axios.get("/templates").then(h=>{h.status===200?(P(h.data.map(y=>l("tr",{children:[n("td",{children:y.filename}),n("td",{children:y.fileType}),n("td",{children:y.created_at}),n("td",{children:y.updated_at}),n("td",{children:n("u",{className:"cursor-pointer",onClick:()=>{s(y.id),$.notify("Loaded "+y.filename,"info")},children:"load"})}),c.isAdmin&&n("td",{children:n("u",{className:"cursor-pointer",onClick:()=>{je.get("/reports",{reportId:y.id})},children:"edit"})})]},y.id))),a(!0),$(document).ready(function(){$("#"+g).DataTable({columnDefs:[{searchable:!1,targets:[1,4]}]})})):$.notify("an error occurred")}).catch(h=>{$.notify(h.message)})}function s(h){axios.get("/template/"+h).then(y=>{y.status===200?loadData(y.data.content):$.notify("an error occurred")}).catch(y=>{$.notify(y.message)})}return l(Y,{children:[n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:W,children:n("span",{className:"hover:text-gray-700",children:"templates"})})}),d?l(Y,{children:[n("div",{className:"flex overflow-y-auto fixed inset-10 z-50 outline-none focus:outline-none",children:n("div",{className:"relative w-auto my-6 mx-auto",children:l("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[l("div",{className:"flex items-start justify-between p-2 border-b border-solid border-slate-200 rounded-t",children:[n("h3",{className:"text-3xl font-semibold justify-center p-2",children:"Templates"}),n("button",{className:"p-2 ml-auto border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>a(!1),children:n("span",{className:"text-black h-6 w-6 text-4xl block outline-none focus:outline-none",children:"×"})})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:g,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",children:[n("thead",{children:l("tr",{children:[n("th",{children:"Filename"}),n("th",{children:"Type"}),n("th",{children:"Created At"}),n("th",{children:"Updated At"}),n("th",{}),c.isAdmin&&n("th",{})]})}),n("tbody",{children:D})]})})})]})})}),n("div",{className:"opacity-25 fixed inset-0 z-40 bg-black",onClick:()=>a(!1)})]}):null]})}function Jn({user:c}){const[d,a]=N.useState(!1),[D,P]=N.useState(!0),[g,W]=N.useState(n("tr",{})),s="reportsTable",[h,y]=N.useState(c.isAdmin?"Reports":"My Reports");function v(z="/reports/create"){c.isAdmin||y(z.endsWith("create")?"My Reports":"Shared With Me"),axios.get(z).then(w=>{w.status===200?(W(w.data.map(O=>l("tr",{children:[n("td",{children:O.filename}),n("td",{children:O.fileType}),n("td",{children:O.created_at}),n("td",{children:O.updated_at}),n("td",{children:n("u",{className:"cursor-pointer",onClick:()=>{je.get("/reports",{reportId:O.id})},children:"edit"})})]},O.id))),a(!0),$(document).ready(function(){$("#"+s).DataTable({columnDefs:[{searchable:!1,targets:[1,4]}]})})):$.notify("an error occurred")}).catch(w=>{$.notify(w.message)})}let C=c.isAdmin?{onClick:()=>v()}:{onMouseEnter:()=>P(!1),onMouseLeave:()=>P(!0)};return l(Y,{children:[l("div",{className:"relative inline-block text-left",children:[n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",...C,children:n("span",{className:"hover:text-gray-700",children:"reports"})})}),n("div",{className:"absolute right-0 z-10 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabIndex:"-1",hidden:D,onMouseEnter:()=>P(!1),onMouseLeave:()=>P(!0),children:l("div",{className:"py-1",role:"none",children:[n("button",{className:"inline-flex items-center px-4 py-2 border border-transparent",type:"button",onClick:()=>je.get("/reports"),children:n("span",{className:"hover:text-gray-700",children:"New"})}),n("br",{}),n("button",{className:"inline-flex items-center px-4 py-2 border border-transparent",type:"button",onClick:()=>v(),children:n("span",{className:"hover:text-gray-700",children:"My Reports"})}),n("br",{}),n("button",{className:"inline-flex items-center px-4 py-2 border border-transparent",type:"button",onClick:()=>v("/reports/shared"),children:n("span",{className:"hover:text-gray-700",children:"Shared with me"})})]})})]}),d?l(Y,{children:[n("div",{className:"flex overflow-y-auto fixed inset-10 z-50 outline-none focus:outline-none",children:n("div",{className:"relative w-auto my-6 mx-auto",children:l("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[l("div",{className:"flex items-start justify-between p-2 border-b border-solid border-slate-200 rounded-t",children:[n("h3",{className:"text-3xl font-semibold justify-center p-2",children:h}),n("button",{className:"p-2 ml-auto border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>a(!1),children:n("span",{className:"text-black h-6 w-6 text-4xl block outline-none focus:outline-none",children:"×"})})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:s,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",children:[n("thead",{children:l("tr",{children:[n("th",{children:"Filename"}),n("th",{children:"Type"}),n("th",{children:"Created At"}),n("th",{children:"Updated At"}),n("th",{})]})}),n("tbody",{children:g})]})})})]})})}),n("div",{className:"opacity-25 fixed inset-0 z-40 bg-black",onClick:()=>a(!1)})]}):null]})}function Xn({user:c,report:d}){!c.isAdmin&&d.id===null&&(d.fileType="report");const[a,D]=N.useState({id:d.id,filename:d.filename,fileType:d.fileType}),[P,g]=N.useState(!1),[W,s]=N.useState(!1),[h,y]=N.useState(!1),[v,C]=N.useState(!0),[z,w]=N.useState(!1),[O,L]=N.useState(null),[I,q]=N.useState(d.hasOwnProperty("users")?Object.fromEntries(new Map(d.users.map(f=>[f.id,!0]))):{}),H=N.useRef(I);function E(){if(a.filename.trim().length===0||a.fileType.trim().length===0)$.notify("Please enter all fields.");else{let f=Object.keys(H.current).filter(_=>H.current[_]).toString();axios.put("/reports/"+a.id,{filename:a.filename,fileType:a.fileType,content:getEditAreaHtml(),share:f.length===0?"0":f}).then(_=>{_.status===200?(D({filename:_.data.filename,fileType:_.data.fileType,id:_.data.id}),q(Object.fromEntries(new Map(_.data.users.map(j=>[j.id,!0])))),$.notify("Edited successfully","success")):$.notify("An error occurred")}).catch(_=>{$.notify(_)}),close()}}function k(f=null){f??(f=!v),editor.ui.view.toolbar.element.style.display=f?"flex":"none",C(f)}function F(){z?editor.disableReadOnlyMode("lock-all"):editor.enableReadOnlyMode("lock-all")}function x(){a.id===null?g(!0):E()}function b(){if(!c.isAdmin){const f=document.getElementsByClassName("perm-admin"),_=document.getElementsByClassName("perm-supervisor"),j=document.getElementsByClassName("perm-employee");for(let A of f)A.className="perm-admin",A.removeAttribute("role"),A.contentEditable=!1;for(let A of _){let U=c.role==="supervisor";A.contentEditable=U,A.className=U?A.className:"perm-supervisor",U||A.removeAttribute("role")}for(let A of j){let U=c.role==="employee";A.contentEditable=U,A.className=U?A.className:"perm-employee",U||A.removeAttribute("role")}}}return l("div",{className:"bg-white",children:[n("div",{id:"data-exchange",hidden:!0}),n(Gn,{setShowSaveModal:g,showSaveModal:P,fileDetails:a,setFileDetails:D,edit:E,user:c,selected:H,selectedShared:I,initialMembers:d.hasOwnProperty("users")?Object.fromEntries(new Map(d.users.map(f=>[f.id,f]))):{}}),n(Vn,{setShowSavePDFModal:s,showSavePDFModal:W}),O&&n(Kn,{setShowLockModal:y,showLockModal:h,cell:O}),l("div",{className:"ml-3",children:[n("span",{className:"inline-flex rounded-md mr-6 mt-3",children:"Report Details>"}),l("span",{className:"inline-flex rounded-md mr-6",children:["Name: ",a.filename]}),c.isAdmin&&l("span",{className:"inline-flex rounded-md mr-6",children:["Type: ",a.fileType]}),a.id===null?n("span",{className:"inline-flex rounded-md mr-6",children:"Not saved"}):n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:()=>g(!0),children:n("span",{className:"hover:text-gray-700",children:"Edit Details"})})})]}),l("div",{children:[n("span",{className:"inline-flex rounded-md",children:n(Hn,{onClick:()=>k(),showTools:v})}),n(qn,{}),n(Jn,{user:c}),n(Yn,{user:c}),n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:x,children:n("span",{className:"hover:text-gray-700",children:"Save"})})}),n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:()=>s(!0),children:n("span",{className:"hover:text-gray-700",children:"download PDF"})})}),n(Qn,{onClick:F,readonly:z}),O&&n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:()=>y(!0),children:n("span",{className:"hover:text-gray-700 lock-button",children:"Lock"})})})]}),n(Ln.CKEditor,{editor:ClassicEditor,config:{htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}],disallow:[]}},onReady:f=>{window.loadData=function(_){const j=document.getElementById("data-exchange");j.innerHTML=_,b(),window.editor.setData(j.innerHTML)},window.getEditAreaHtml=function(){const _=document.getElementById("data-exchange");return _.innerHTML=f.ui.view.editable.element.innerHTML,_.querySelectorAll(".ck-table-column-resizer").forEach(j=>{j.remove()}),_.querySelectorAll(".ck-table-bogus-paragraph").forEach(j=>{j.className=j.className.replace("ck-table-bogus-paragraph","");let A=j.children;for(let U=0;U<A.length;U++)A[U].tagName==="BR"&&A[U].remove();j.children.length===0&&j.innerText.length===0&&j.remove()}),_.querySelectorAll("p").forEach(j=>{let A=j.children;A.length>0&&(A[0].tagName==="BR"&&A[0].remove(),j.children.length===0&&j.innerText.length===0&&j.remove())}),_.innerHTML},window.editor=f,f.plugins.get("FileRepository").createUploadAdapter=_=>new Bn(_),d.id!==null&&loadData(d.content),f.on("change:isReadOnly",(_,j,A)=>{w(A)}),c.isAdmin&&f.ui.view.editable.element.addEventListener("click",_=>{L(_.target.closest("td")??_.target.closest("th"))})},onFocus:()=>{}})]})}function io({auth:c,report:d}){let a={...c.user,isAdmin:c.user.role==="admin"};return l(Fn,{user:a,children:[n($n,{title:"Records"}),n("div",{className:"p-0",children:n(Xn,{user:a,report:d})})]})}export{io as default};

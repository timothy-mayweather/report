import{a as e,j as n,b as N,r as i}from"./app-7a1fd182.js";import{A as b}from"./AuthenticatedLayout-5bd2a27d.js";import{P as r}from"./PrimaryButton-f3267b6c.js";import{M as v}from"./Modal-ff22d37e.js";import"./transition-fd429c95.js";function g({currentRole:a,showModal:o,setShowModal:d,setRespRole:u}){let l=a.name;function c(){d(!1)}function m(){l===a.name||l.length===0?$.notify("No action to apply!"):axios.put("/roles/"+a.id,{name:l}).then(s=>{s.status===200?(u(s.data),$.notify("Changed successfully","success"),c()):$.notify("An error occurred")}).catch(s=>{$.notify(s.response.data.message??s)})}return e("div",{children:e(v,{onClose:c,show:o,children:n("div",{className:"px-6 py-6",children:[n("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Name: "}),e("span",{children:e("input",{defaultValue:l,onInput:s=>{l=s.target.value}})})]}),n("div",{children:[e(r,{className:"mr-6",onClick:()=>{m()},children:"Apply"}),e(r,{className:"bg-red-600 hover:bg-red-600",onClick:()=>{c()},children:"Cancel"})]})]})})})}function w({fetchedRoles:a}){const[o,d]=i.useState(Object.fromEntries(new Map(a.map(t=>[t.id,t])))),[u,l]=i.useState(!1),[c,m]=i.useState(a[0]),[s,p]=i.useState(null),[h,f]=i.useState("");i.useEffect(()=>{s!==null&&d({...o,[s.id]:s})},[s]);function y(t){m(t),l(!0)}return n("div",{children:[n("div",{children:[e("span",{className:"mr-2",children:"New Role"}),e("input",{name:"name",value:h,onInput:t=>f(t.target.value)}),e(r,{className:"ml-2",onClick:()=>{h.trim().length===0?$.notify("Please Enter new role"):axios.post("/roles",{name:h}).then(t=>{t.status===200?(f(""),p(t.data),$.notify("Added successfully","success")):$.notify("An error occurred")}).catch(t=>{$.notify(t.response.data.message??t)})},children:"Save"})]}),e("br",{}),e(g,{showModal:u,setShowModal:l,currentRole:c,setRespRole:p}),e("p",{className:"text-left text-lg font-bold",children:"Current Roles"}),e("table",{children:e("tbody",{children:Object.values(o).map(t=>n("tr",{children:[n("td",{className:"pr-4 pb-4 text-left",children:[e("span",{children:"+ "}),t.name]}),e("td",{className:"pb-4",children:e(r,{onClick:()=>{y(t)},children:"EDIT"})})]},t.id))})})]})}function E({auth:a,roles:o}){return n(b,{user:a.user,children:[e(N,{title:"Roles"}),e("div",{className:"mx-auto p-4 sm:p-6 lg:p-8 bg-white",children:e(w,{fetchedRoles:o})})]})}export{E as default};

import{r as v,c as Oe,g as Ae,a as n,j as l,F as ne}from"./app-74c4a37c.js";import{M as Ke}from"./Modal-57d19c88.js";import{P as be}from"./PrimaryButton-612045f9.js";import"./AuthenticatedLayout-ceba2cb9.js";var Te={exports:{}};/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */Te.exports;(function(u,c){(function(h,O){u.exports=O(v)})(self,h=>(()=>{var O={703:(a,f,p)=>{var m=p(414);function N(){}function I(){}I.resetWarningCache=N,a.exports=function(){function C(U,B,Q,x,R,L){if(L!==m){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}function E(){return C}C.isRequired=C;var D={array:C,bigint:C,bool:C,func:C,number:C,object:C,string:C,symbol:C,any:C,arrayOf:E,element:C,elementType:C,instanceOf:E,node:C,objectOf:E,oneOf:E,oneOfType:E,shape:E,exact:E,checkPropTypes:I,resetWarningCache:N};return D.PropTypes=D,D}},697:(a,f,p)=>{a.exports=p(703)()},414:a=>{a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},787:a=>{a.exports=h}},P={};function g(a){var f=P[a];if(f!==void 0)return f.exports;var p=P[a]={exports:{}};return O[a](p,p.exports,g),p.exports}g.n=a=>{var f=a&&a.__esModule?()=>a.default:()=>a;return g.d(f,{a:f}),f},g.d=(a,f)=>{for(var p in f)g.o(f,p)&&!g.o(a,p)&&Object.defineProperty(a,p,{enumerable:!0,get:f[p]})},g.o=(a,f)=>Object.prototype.hasOwnProperty.call(a,f),g.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var F={};return(()=>{g.r(F),g.d(F,{CKEditor:()=>me,CKEditorContext:()=>Ve});var a=g(787),f=g.n(a),p=g(697),m=g.n(p);const N=new Array(256).fill("").map((e,t)=>("0"+t.toString(16)).slice(-2));class I{constructor(t){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=r=>{const o="error"in r?r.error:r.reason;o instanceof Error&&this._handleError(o,r)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,r){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(r)}off(t,r){this._listeners[t]=this._listeners[t].filter(o=>o!==r)}_fire(t,...r){const o=this._listeners[t]||[];for(const i of o)i.apply(this,[null,...r])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,r){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:r instanceof ErrorEvent?r.filename:void 0,lineno:r instanceof ErrorEvent?r.lineno:void 0,colno:r instanceof ErrorEvent?r.colno:void 0,date:this._now()});const o=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:o}),o?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function C(e,t=new Set){const r=[e],o=new Set;let i=0;for(;r.length>i;){const d=r[i++];if(!o.has(d)&&E(d)&&!t.has(d))if(o.add(d),Symbol.iterator in d)try{for(const y of d)r.push(y)}catch{}else for(const y in d)y!=="defaultValue"&&r.push(d[y])}return o}function E(e){const t=Object.prototype.toString.call(e),r=typeof e;return!(r==="number"||r==="boolean"||r==="string"||r==="symbol"||r==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||e==null||e._watchdogExcluded||e instanceof EventTarget||e instanceof Event)}function D(e,t,r=new Set){if(e===t&&typeof(o=e)=="object"&&o!==null)return!0;var o;const i=C(e,r),d=C(t,r);for(const y of i)if(d.has(y))return!0;return!1}const U=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},B=typeof Oe=="object"&&Oe&&Oe.Object===Object&&Oe;var Q=typeof self=="object"&&self&&self.Object===Object&&self;const x=B||Q||Function("return this")(),R=function(){return x.Date.now()};var L=/\s/;const w=function(e){for(var t=e.length;t--&&L.test(e.charAt(t)););return t};var K=/^\s+/;const G=function(e){return e&&e.slice(0,w(e)+1).replace(K,"")},X=x.Symbol;var M=Object.prototype,j=M.hasOwnProperty,A=M.toString,s=X?X.toStringTag:void 0;const _=function(e){var t=j.call(e,s),r=e[s];try{e[s]=void 0;var o=!0}catch{}var i=A.call(e);return o&&(t?e[s]=r:delete e[s]),i};var V=Object.prototype.toString;const Y=function(e){return V.call(e)};var te=X?X.toStringTag:void 0;const S=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":te&&te in Object(e)?_(e):Y(e)},H=function(e){return e!=null&&typeof e=="object"},Bt=function(e){return typeof e=="symbol"||H(e)&&S(e)=="[object Symbol]"};var Ht=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Vt=/^0o[0-7]+$/i,Qt=parseInt;const Ge=function(e){if(typeof e=="number")return e;if(Bt(e))return NaN;if(U(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=U(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=G(e);var r=qt.test(e);return r||Vt.test(e)?Qt(e.slice(2),r?2:8):Ht.test(e)?NaN:+e};var Kt=Math.max,Gt=Math.min;const Yt=function(e,t,r){var o,i,d,y,b,z,W=0,Se=!1,ae=!1,Z=!0;if(typeof e!="function")throw new TypeError("Expected a function");function ye(q){var re=o,le=i;return o=i=void 0,W=q,y=e.apply(le,re)}function xe(q){var re=q-z;return z===void 0||re>=t||re<0||ae&&q-W>=d}function ce(){var q=R();if(xe(q))return J(q);b=setTimeout(ce,function(re){var le=t-(re-z);return ae?Gt(le,d-(re-W)):le}(q))}function J(q){return b=void 0,Z&&o?ye(q):(o=i=void 0,y)}function ee(){var q=R(),re=xe(q);if(o=arguments,i=this,z=q,re){if(b===void 0)return function(le){return W=le,b=setTimeout(ce,t),Se?ye(le):y}(z);if(ae)return clearTimeout(b),b=setTimeout(ce,t),ye(z)}return b===void 0&&(b=setTimeout(ce,t)),y}return t=Ge(t)||0,U(r)&&(Se=!!r.leading,d=(ae="maxWait"in r)?Kt(Ge(r.maxWait)||0,t):d,Z="trailing"in r?!!r.trailing:Z),ee.cancel=function(){b!==void 0&&clearTimeout(b),W=0,o=z=i=b=void 0},ee.flush=function(){return b===void 0?y:J(R())},ee},Jt=function(e,t,r){var o=!0,i=!0;if(typeof e!="function")throw new TypeError("Expected a function");return U(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),Yt(e,t,{leading:o,maxWait:t,trailing:i})},Xt=function(){this.__data__=[],this.size=0},Ye=function(e,t){return e===t||e!=e&&t!=t},Ee=function(e,t){for(var r=e.length;r--;)if(Ye(e[r][0],t))return r;return-1};var Zt=Array.prototype.splice;const er=function(e){var t=this.__data__,r=Ee(t,e);return!(r<0)&&(r==t.length-1?t.pop():Zt.call(t,r,1),--this.size,!0)},tr=function(e){var t=this.__data__,r=Ee(t,e);return r<0?void 0:t[r][1]},rr=function(e){return Ee(this.__data__,e)>-1},nr=function(e,t){var r=this.__data__,o=Ee(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this};function de(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}de.prototype.clear=Xt,de.prototype.delete=er,de.prototype.get=tr,de.prototype.has=rr,de.prototype.set=nr;const je=de,or=function(){this.__data__=new je,this.size=0},sr=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ir=function(e){return this.__data__.get(e)},ar=function(e){return this.__data__.has(e)},Je=function(e){if(!U(e))return!1;var t=S(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},ke=x["__core-js_shared__"];var Xe=function(){var e=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const cr=function(e){return!!Xe&&Xe in e};var lr=Function.prototype.toString;const oe=function(e){if(e!=null){try{return lr.call(e)}catch{}try{return e+""}catch{}}return""};var dr=/^\[object .+?Constructor\]$/,ur=Function.prototype,hr=Object.prototype,fr=ur.toString,pr=hr.hasOwnProperty,mr=RegExp("^"+fr.call(pr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const yr=function(e){return!(!U(e)||cr(e))&&(Je(e)?mr:dr).test(oe(e))},br=function(e,t){return e==null?void 0:e[t]},se=function(e,t){var r=br(e,t);return yr(r)?r:void 0},ge=se(x,"Map"),ve=se(Object,"create"),gr=function(){this.__data__=ve?ve(null):{},this.size=0},vr=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var _r=Object.prototype.hasOwnProperty;const wr=function(e){var t=this.__data__;if(ve){var r=t[e];return r==="__lodash_hash_undefined__"?void 0:r}return _r.call(t,e)?t[e]:void 0};var xr=Object.prototype.hasOwnProperty;const Er=function(e){var t=this.__data__;return ve?t[e]!==void 0:xr.call(t,e)},jr=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ve&&t===void 0?"__lodash_hash_undefined__":t,this};function ue(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}ue.prototype.clear=gr,ue.prototype.delete=vr,ue.prototype.get=wr,ue.prototype.has=Er,ue.prototype.set=jr;const Ze=ue,Nr=function(){this.size=0,this.__data__={hash:new Ze,map:new(ge||je),string:new Ze}},Cr=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Ne=function(e,t){var r=e.__data__;return Cr(t)?r[typeof t=="string"?"string":"hash"]:r.map},Sr=function(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t},Or=function(e){return Ne(this,e).get(e)},Ar=function(e){return Ne(this,e).has(e)},Tr=function(e,t){var r=Ne(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this};function he(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}he.prototype.clear=Nr,he.prototype.delete=Sr,he.prototype.get=Or,he.prototype.has=Ar,he.prototype.set=Tr;const kr=he,Pr=function(e,t){var r=this.__data__;if(r instanceof je){var o=r.__data__;if(!ge||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new kr(o)}return r.set(e,t),this.size=r.size,this};function fe(e){var t=this.__data__=new je(e);this.size=t.size}fe.prototype.clear=or,fe.prototype.delete=sr,fe.prototype.get=ir,fe.prototype.has=ar,fe.prototype.set=Pr;const Rr=fe,Mr=function(e,t){for(var r=-1,o=e==null?0:e.length;++r<o&&t(e[r],r,e)!==!1;);return e},et=function(){try{var e=se(Object,"defineProperty");return e({},"",{}),e}catch{}}(),tt=function(e,t,r){t=="__proto__"&&et?et(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var Dr=Object.prototype.hasOwnProperty;const rt=function(e,t,r){var o=e[t];Dr.call(e,t)&&Ye(o,r)&&(r!==void 0||t in e)||tt(e,t,r)},Ce=function(e,t,r,o){var i=!r;r||(r={});for(var d=-1,y=t.length;++d<y;){var b=t[d],z=o?o(r[b],e[b],b,r,e):void 0;z===void 0&&(z=e[b]),i?tt(r,b,z):rt(r,b,z)}return r},Wr=function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o},nt=function(e){return H(e)&&S(e)=="[object Arguments]"};var ot=Object.prototype,Ir=ot.hasOwnProperty,zr=ot.propertyIsEnumerable;const $r=nt(function(){return arguments}())?nt:function(e){return H(e)&&Ir.call(e,"callee")&&!zr.call(e,"callee")},Pe=Array.isArray,Fr=function(){return!1};var st=c&&!c.nodeType&&c,it=st&&!0&&u&&!u.nodeType&&u,at=it&&it.exports===st?x.Buffer:void 0;const ct=(at?at.isBuffer:void 0)||Fr;var Ur=/^(?:0|[1-9]\d*)$/;const Lr=function(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&(r=="number"||r!="symbol"&&Ur.test(e))&&e>-1&&e%1==0&&e<t},lt=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991};var k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Arguments]"]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object Boolean]"]=k["[object DataView]"]=k["[object Date]"]=k["[object Error]"]=k["[object Function]"]=k["[object Map]"]=k["[object Number]"]=k["[object Object]"]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object WeakMap]"]=!1;const Br=function(e){return H(e)&&lt(e.length)&&!!k[S(e)]},Re=function(e){return function(t){return e(t)}};var dt=c&&!c.nodeType&&c,_e=dt&&!0&&u&&!u.nodeType&&u,Me=_e&&_e.exports===dt&&B.process;const pe=function(){try{var e=_e&&_e.require&&_e.require("util").types;return e||Me&&Me.binding&&Me.binding("util")}catch{}}();var ut=pe&&pe.isTypedArray;const Hr=ut?Re(ut):Br;var qr=Object.prototype.hasOwnProperty;const ht=function(e,t){var r=Pe(e),o=!r&&$r(e),i=!r&&!o&&ct(e),d=!r&&!o&&!i&&Hr(e),y=r||o||i||d,b=y?Wr(e.length,String):[],z=b.length;for(var W in e)!t&&!qr.call(e,W)||y&&(W=="length"||i&&(W=="offset"||W=="parent")||d&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||Lr(W,z))||b.push(W);return b};var Vr=Object.prototype;const De=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Vr)},ft=function(e,t){return function(r){return e(t(r))}},Qr=ft(Object.keys,Object);var Kr=Object.prototype.hasOwnProperty;const Gr=function(e){if(!De(e))return Qr(e);var t=[];for(var r in Object(e))Kr.call(e,r)&&r!="constructor"&&t.push(r);return t},pt=function(e){return e!=null&&lt(e.length)&&!Je(e)},We=function(e){return pt(e)?ht(e):Gr(e)},Yr=function(e,t){return e&&Ce(t,We(t),e)},Jr=function(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t};var Xr=Object.prototype.hasOwnProperty;const Zr=function(e){if(!U(e))return Jr(e);var t=De(e),r=[];for(var o in e)(o!="constructor"||!t&&Xr.call(e,o))&&r.push(o);return r},Ie=function(e){return pt(e)?ht(e,!0):Zr(e)},en=function(e,t){return e&&Ce(t,Ie(t),e)};var mt=c&&!c.nodeType&&c,yt=mt&&!0&&u&&!u.nodeType&&u,bt=yt&&yt.exports===mt?x.Buffer:void 0,gt=bt?bt.allocUnsafe:void 0;const tn=function(e,t){if(t)return e.slice();var r=e.length,o=gt?gt(r):new e.constructor(r);return e.copy(o),o},rn=function(e,t){var r=-1,o=e.length;for(t||(t=Array(o));++r<o;)t[r]=e[r];return t},nn=function(e,t){for(var r=-1,o=e==null?0:e.length,i=0,d=[];++r<o;){var y=e[r];t(y,r,e)&&(d[i++]=y)}return d},vt=function(){return[]};var on=Object.prototype.propertyIsEnumerable,_t=Object.getOwnPropertySymbols;const ze=_t?function(e){return e==null?[]:(e=Object(e),nn(_t(e),function(t){return on.call(e,t)}))}:vt,sn=function(e,t){return Ce(e,ze(e),t)},wt=function(e,t){for(var r=-1,o=t.length,i=e.length;++r<o;)e[i+r]=t[r];return e},$e=ft(Object.getPrototypeOf,Object),xt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)wt(t,ze(e)),e=$e(e);return t}:vt,an=function(e,t){return Ce(e,xt(e),t)},Et=function(e,t,r){var o=t(e);return Pe(e)?o:wt(o,r(e))},cn=function(e){return Et(e,We,ze)},ln=function(e){return Et(e,Ie,xt)},Fe=se(x,"DataView"),Ue=se(x,"Promise"),Le=se(x,"Set"),Be=se(x,"WeakMap");var jt="[object Map]",Nt="[object Promise]",Ct="[object Set]",St="[object WeakMap]",Ot="[object DataView]",dn=oe(Fe),un=oe(ge),hn=oe(Ue),fn=oe(Le),pn=oe(Be),ie=S;(Fe&&ie(new Fe(new ArrayBuffer(1)))!=Ot||ge&&ie(new ge)!=jt||Ue&&ie(Ue.resolve())!=Nt||Le&&ie(new Le)!=Ct||Be&&ie(new Be)!=St)&&(ie=function(e){var t=S(e),r=t=="[object Object]"?e.constructor:void 0,o=r?oe(r):"";if(o)switch(o){case dn:return Ot;case un:return jt;case hn:return Nt;case fn:return Ct;case pn:return St}return t});const He=ie;var mn=Object.prototype.hasOwnProperty;const yn=function(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&mn.call(e,"index")&&(r.index=e.index,r.input=e.input),r},At=x.Uint8Array,qe=function(e){var t=new e.constructor(e.byteLength);return new At(t).set(new At(e)),t},bn=function(e,t){var r=t?qe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)};var gn=/\w*$/;const vn=function(e){var t=new e.constructor(e.source,gn.exec(e));return t.lastIndex=e.lastIndex,t};var Tt=X?X.prototype:void 0,kt=Tt?Tt.valueOf:void 0;const _n=function(e){return kt?Object(kt.call(e)):{}},wn=function(e,t){var r=t?qe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},xn=function(e,t,r){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return qe(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return bn(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return wn(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return vn(e);case"[object Symbol]":return _n(e)}};var Pt=Object.create;const En=function(){function e(){}return function(t){if(!U(t))return{};if(Pt)return Pt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),jn=function(e){return typeof e.constructor!="function"||De(e)?{}:En($e(e))},Nn=function(e){return H(e)&&He(e)=="[object Map]"};var Rt=pe&&pe.isMap;const Cn=Rt?Re(Rt):Nn,Sn=function(e){return H(e)&&He(e)=="[object Set]"};var Mt=pe&&pe.isSet;const On=Mt?Re(Mt):Sn;var Dt="[object Arguments]",Wt="[object Function]",It="[object Object]",T={};T[Dt]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[It]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[Wt]=T["[object WeakMap]"]=!1;const An=function e(t,r,o,i,d,y){var b,z=1&r,W=2&r,Se=4&r;if(o&&(b=d?o(t,i,d,y):o(t)),b!==void 0)return b;if(!U(t))return t;var ae=Pe(t);if(ae){if(b=yn(t),!z)return rn(t,b)}else{var Z=He(t),ye=Z==Wt||Z=="[object GeneratorFunction]";if(ct(t))return tn(t,z);if(Z==It||Z==Dt||ye&&!d){if(b=W||ye?{}:jn(t),!z)return W?an(t,en(b,t)):sn(t,Yr(b,t))}else{if(!T[Z])return d?t:{};b=xn(t,Z,z)}}y||(y=new Rr);var xe=y.get(t);if(xe)return xe;y.set(t,b),On(t)?t.forEach(function(J){b.add(e(J,r,o,J,t,y))}):Cn(t)&&t.forEach(function(J,ee){b.set(ee,e(J,r,o,ee,t,y))});var ce=ae?void 0:(Se?W?ln:cn:W?Ie:We)(t);return Mr(ce||t,function(J,ee){ce&&(J=t[ee=J]),rt(b,ee,e(J,r,o,ee,t,y))}),b},Tn=function(e,t){return An(e,5,t=typeof t=="function"?t:void 0)};var kn=Function.prototype,Pn=Object.prototype,zt=kn.toString,Rn=Pn.hasOwnProperty,Mn=zt.call(Object);const Dn=function(e){if(!H(e)||S(e)!="[object Object]")return!1;var t=$e(e);if(t===null)return!0;var r=Rn.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&zt.call(r)==Mn},Wn=function(e){return H(e)&&e.nodeType===1&&!Dn(e)};class $t extends I{constructor(t,r={}){super(r),this._editor=null,this._throttledSave=Jt(this._save.bind(this),typeof r.saveInterval=="number"?r.saveInterval:5e3),t&&(this._creator=(o,i)=>t.create(o,i)),this._destructor=o=>o.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{if(typeof this._elementOrData=="string")return this.create(this._data,this._config,this._config.context);{const t=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,t,t.context)}}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,r=this._config,o){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=t,this._config=this._cloneEditorConfiguration(r)||{},this._config.context=o,this._creator(t,this._config))).then(i=>{this._editor=i,i.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=i.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=t}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t={};for(const r of this._editor.model.document.getRootNames())t[r]=this._editor.data.get({rootName:r});return t}_isErrorComingFromThisItem(t){return D(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return Tn(t,(r,o)=>Wn(r)||o==="context"?r:void 0)}}const we=Symbol("MainQueueId");class Ft extends I{constructor(t,r={}){super(r),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new In,this._watchdogConfig=r,this._creator=o=>t.create(o),this._destructor=o=>o.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(we,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const r=Ut(t);return Promise.all(r.map(o=>this._actionQueues.enqueue(o.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let i;if(this._watchdogs.has(o.id))throw new Error(`Item with the given id is already added: '${o.id}'.`);if(o.type==="editor")return i=new $t(null,this._watchdogConfig),i.setCreator(o.creator),i._setExcludedProperties(this._contextProps),o.destructor&&i.setDestructor(o.destructor),this._watchdogs.set(o.id,i),i.on("error",(d,{error:y,causesRestart:b})=>{this._fire("itemError",{itemId:o.id,error:y}),b&&this._actionQueues.enqueue(o.id,()=>new Promise(z=>{const W=()=>{i.off("restart",W),this._fire("itemRestart",{itemId:o.id}),z()};i.on("restart",W)}))}),i.create(o.sourceElementOrData,o.config,this._context);throw new Error(`Not supported item type: '${o.type}'.`)})))}remove(t){const r=Ut(t);return Promise.all(r.map(o=>this._actionQueues.enqueue(o,()=>{const i=this._getWatchdog(o);return this._watchdogs.delete(o),i.destroy()})))}destroy(){return this._actionQueues.enqueue(we,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(we,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=C(this._context),Promise.all(Array.from(this._watchdogs.values()).map(r=>(r._setExcludedProperties(this._contextProps),r.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(r=>r.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const r=this._watchdogs.get(t);if(!r)throw new Error(`Item with the given id was not registered: ${t}.`);return r}_isErrorComingFromThisItem(t){for(const r of this._watchdogs.values())if(r._isErrorComingFromThisItem(t))return!1;return D(this._context,t.context)}}class In{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,r){const o=t===we;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const i=(o?Promise.all(this._queues.values()):Promise.all([this._queues.get(we),this._queues.get(t)])).then(r),d=i.catch(()=>{});return this._queues.set(t,d),i.finally(()=>{this._activeActions--,this._queues.get(t)===d&&this._activeActions===0&&this._onEmptyCallbacks.forEach(y=>y())})}}function Ut(e){return Array.isArray(e)?e:[e]}const Lt=f().createContext("contextWatchdog");class Ve extends f().Component{constructor(t,r){super(t,r),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(t){return this._shouldComponentUpdate(t)}async _shouldComponentUpdate(t){return t.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(t.config)),t.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(t.config),!0):this.props.children!==t.children}render(){return f().createElement(Lt.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}async _initializeContextWatchdog(t){this.contextWatchdog=new Ft(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(r,o)=>{this.props.onError(o.error,{phase:"runtime",willContextRestart:o.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(t).catch(r=>{this.props.onError(r,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}Ve.defaultProps={isLayoutReady:!0,onError:(e,t)=>console.error(e,t)},Ve.propTypes={id:m().string,isLayoutReady:m().bool,context:m().func,watchdogConfig:m().object,config:m().object,onReady:m().func,onError:m().func};const Qe="Lock from React integration (@ckeditor/ckeditor5-react)";class me extends f().Component{constructor(t){super(t),this.editorDestructionInProgress=null,this.domContainer=f().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:r}=window;if(r){const[o]=r.split(".").map(Number);o<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.props.disableWatchdog?this.instance:this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(t){return!!this.editor&&(t.id!==this.props.id||t.disableWatchdog!==this.props.disableWatchdog||(this._shouldUpdateEditor(t)&&this.editor.data.set(t.data),"disabled"in t&&(t.disabled?this.editor.enableReadOnlyMode(Qe):this.editor.disableReadOnlyMode(Qe)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return f().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.props.disableWatchdog?this.instance=await this._createEditor(this.domContainer.current,this._getConfig()):this.watchdog||(this.context instanceof Ft?this.watchdog=new zn(this.context):this.watchdog=new me._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((t,r)=>this._createEditor(t,r)),this.watchdog.on("error",(t,{error:r,causesRestart:o})=>{(this.props.onError||console.error)(r,{phase:"runtime",willEditorRestart:o})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(t=>{(this.props.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1})}))}_createEditor(t,r){return this.props.editor.create(t,r).then(o=>{"disabled"in this.props&&this.props.disabled&&o.enableReadOnlyMode(Qe);const i=o.model.document,d=o.editing.view.document;return i.on("change:data",y=>{this.props.onChange&&this.props.onChange(y,o)}),d.on("focus",y=>{this.props.onFocus&&this.props.onFocus(y,o)}),d.on("blur",y=>{this.props.onBlur&&this.props.onBlur(y,o)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(o)}),o})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(t=>{setTimeout(async()=>this.watchdog?(await this.watchdog.destroy(),this.watchdog=null,t()):this.instance?(await this.instance.destroy(),this.instance=null,t()):void t())})}_shouldUpdateEditor(t){return this.props.data!==t.data&&this.editor.data.get()!==t.data}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),{...t,initialData:t.initialData||this.props.data||""}}}me.contextType=Lt,me.propTypes={editor:m().func.isRequired,data:m().string,config:m().object,disableWatchdog:m().bool,watchdogConfig:m().object,onChange:m().func,onReady:m().func,onFocus:m().func,onBlur:m().func,onError:m().func,disabled:m().bool,id:m().any},me._EditorWatchdog=$t;class zn{constructor(t){this._contextWatchdog=t,this._id=function(){const r=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,d=4294967296*Math.random()>>>0;return"e"+N[r>>0&255]+N[r>>8&255]+N[r>>16&255]+N[r>>24&255]+N[o>>0&255]+N[o>>8&255]+N[o>>16&255]+N[o>>24&255]+N[i>>0&255]+N[i>>8&255]+N[i>>16&255]+N[i>>24&255]+N[d>>0&255]+N[d>>8&255]+N[d>>16&255]+N[d>>24&255]}()}setCreator(t){this._creator=t}create(t,r){return this._contextWatchdog.add({sourceElementOrData:t,config:r,creator:this._creator,id:this._id,type:"editor"})}on(t,r){this._contextWatchdog.on("itemError",(o,{itemId:i,error:d})=>{i===this._id&&r(null,{error:d,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}})(),F})())})(Te,Te.exports);var $n=Te.exports;class Fn{constructor(c){this.loader=c}upload(){return this.loader.file.then(c=>new Promise((h,O)=>{Ae.post("/upload",{file:c},{forceFormData:!0,onSuccess(P){h({default:P.props.flash.success.urls.default})}})}))}abort(){console.log("abort")}}const Un=Fn;function Ln(){const[u,c]=v.useState(!1),[h,O]=v.useState(n("tr",{})),P="filesTable";function g(){axios.get("/upload").then(F=>{O(F.data.map(a=>l("tr",{children:[n("td",{children:a.file_name}),n("td",{children:a.name}),n("td",{children:a.mime_type}),n("td",{children:n("a",{href:"/storage/"+a.path,target:"_blank",children:n("u",{children:"view"})})}),n("td",{children:n("button",{className:"border p-2 inline-flex items-center px-4 py-2 bg-gray-800 border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2",type:"button",onClick:()=>navigator.clipboard.writeText("/storage/"+a.path),children:"Copy Url"})})]},a.id))),c(!0),$(document).ready(function(){$("#"+P).DataTable({columnDefs:[{searchable:!1,targets:[3,4]}]})})})}return l(ne,{children:[n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:g,children:n("span",{className:"hover:text-gray-700",children:"view uploads"})})}),u?l(ne,{children:[n("div",{className:"flex overflow-y-auto fixed inset-10 z-50 outline-none focus:outline-none",children:n("div",{className:"relative w-auto my-6 mx-auto",children:l("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[l("div",{className:"flex items-start justify-between p-2 border-b border-solid border-slate-200 rounded-t",children:[n("h3",{className:"text-3xl font-semibold justify-center p-2",children:"Uploaded Files"}),n("button",{className:"p-2 ml-auto border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>c(!1),children:n("span",{className:"text-black h-6 w-6 text-4xl block outline-none focus:outline-none",children:"×"})})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:P,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",children:[n("thead",{children:l("tr",{children:[n("th",{children:"Filename"}),n("th",{children:"Alias"}),n("th",{children:"Mimetype"}),n("th",{children:"Link"}),n("th",{children:"COPY URL"})]})}),n("tbody",{children:h})]})})})]})})}),n("div",{className:"opacity-25 fixed inset-0 z-40 bg-black",onClick:()=>c(!1)})]}):null]})}function Bn({showTools:u,onClick:c}){return n(ne,{children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:c,children:l("span",{className:"hover:text-gray-700",children:["editor tools",n("span",{children:n("svg",{style:u?{transform:"rotate(180deg)"}:{},className:"ml-2 -mr-0.5 h-4 w-4 inline-flex",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:n("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})})}function Hn({setShowSavePDFModal:u,showSavePDFModal:c,fileDetails:h}){const[O,P]=v.useState({filename:"",pdfType:"image"}),[g,F]=v.useState(!1);v.useEffect(()=>{P({...O,filename:h.filename})},[c]);function a(m){P({...O,[m.target.name]:m.target.value})}function f(){u(!1)}function p(){if(O.filename.trim().length===0||O.pdfType.trim().length===0)F(!0);else{if(O.pdfType==="image"){let m=document.querySelector(".ck.ck-editor__editable_inline"),N=m.style.border;m.style.removeProperty("border");let I=document.getElementsByClassName("ck-editor__main")[0];html2pdf().set({filename:O.filename+".pdf",image:{type:"jpeg",quality:.98}}).from(I).save(),m.style.border=N}u(!1)}}return n(Ke,{onClose:f,show:c,children:l("div",{className:"px-6 py-6",children:[n("label",{className:"mr-2",children:"Enter filename"}),n("input",{name:"filename",type:"text",onInput:a,value:O.filename}),n("span",{children:" .pdf"}),n("br",{}),n("br",{}),n("span",{className:"text-red-600",hidden:!g,children:"*Please fill all fields"}),l("div",{children:[n("br",{}),n(be,{className:"mr-6",onClick:p,children:"Download"}),n(be,{className:"bg-red-600 hover:bg-red-600",onClick:f,children:"Cancel"})]})]})})}function qn({readonly:u,onClick:c}){return n(ne,{children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:c,children:n("span",{className:"hover:text-gray-700",children:u?"Edit":"Readonly"})})})}function Vn({setShowLockModal:u,showLockModal:c,cell:h}){const[O,P]=v.useState(""),[g,F]=v.useState(""),[a,f]=v.useState(!1),[p,m]=v.useState([]),N=h.closest("tr"),I=h.closest("table");function C(){p.forEach(x=>{x.className=g}),Q(),loadData(getEditAreaHtml()),E()}function E(){setTimeout(()=>{const x=document.getElementsByClassName("perm-admin"),R=document.getElementsByClassName("perm-supervisor"),L=document.getElementsByClassName("perm-employee");for(let w of x)w.className+=" bg-red-600";for(let w of R)w.className+=" bg-yellow-300";for(let w of L)w.className+=" bg-green-800"},500),setTimeout(()=>{const x=document.getElementsByClassName("perm-admin"),R=document.getElementsByClassName("perm-supervisor"),L=document.getElementsByClassName("perm-employee");for(let w of x)w.className=w.className.replace("bg-red-600","");for(let w of R)w.className=w.className.replace("bg-yellow-300","");for(let w of L)w.className=w.className.replace("bg-green-800","")},3e3)}function D(x){m(x);let R=null,L=!0;x.forEach(w=>{const K=w.className.search("perm-"),G=K===-1?"perm-all":w.className.substring(K).split(" ")[0];R===null?R=G:R!==G&&(L=!1)}),F(L&&R!==null?R:"")}function U(x){const R=x.target.value;if(P(R),R==="Cell")D([h]);else if(R==="Table")D(I.cells);else if(R==="Row")D(N.cells);else if(R==="Column"){const L=h.cellIndex;let w=[];I.rows.forEach(K=>{let G=K.cells[L];G&&w.push(G)}),D(w)}}function B(x){F(x.target.value)}function Q(){u(!1),P(""),F(""),f(!1),m([])}return n(Ke,{onClose:Q,show:c,children:l("div",{className:"px-6 py-6",children:[n("label",{className:"mr-2",children:"Choose Element"}),l("select",{name:"element",onChange:U,value:O,children:[n("option",{value:""}),n("option",{value:"Cell",children:"Cell"}),n("option",{value:"Row",children:"Row"}),n("option",{value:"Column",children:"Column"}),n("option",{value:"Table",children:"Table"})]}),n("br",{}),n("br",{}),l("div",{children:[n("div",{children:"Choose Permissions"}),l("div",{className:"md:flex items-center",children:[n("input",{className:"ml-2 mr-2",type:"radio",name:"permissions",value:"perm-all",checked:g==="perm-all",onChange:B}),n("label",{children:"All"}),n("input",{className:"ml-4 mr-2",type:"radio",name:"permissions",value:"perm-admin",checked:g==="perm-admin",onChange:B}),n("label",{children:"Admin Only"}),n("span",{className:"ml-1 rounded-bl-2xl bg-red-600 h-4 w-4"})]}),n("span",{className:"ml-2",children:"Admin and "}),n("br",{}),l("div",{className:"md:flex items-center",children:[n("input",{className:"ml-2 mr-2",type:"radio",name:"permissions",value:"perm-supervisor",checked:g==="perm-supervisor",onChange:B}),n("label",{children:"Supervisor"}),n("span",{className:"ml-1 rounded-bl-2xl bg-yellow-300 h-4 w-4"}),n("input",{className:"ml-4 mr-2",type:"radio",name:"permissions",value:"perm-employee",checked:g==="perm-employee",onChange:B}),n("label",{children:"Employee"}),n("span",{className:"ml-1 rounded-bl-2xl bg-green-800 h-4 w-4"})]})]}),n("span",{className:"text-red-600",hidden:!a,children:"*Please fill all fields"}),l("div",{children:[n("br",{}),n(be,{className:"mr-6",onClick:C,children:"Apply"}),n(be,{className:"bg-red-600 hover:bg-red-600",onClick:()=>u(!1),children:"Cancel"})]})]})})}function Qn({setShowSaveModal:u,showSaveModal:c,fileDetails:h,setFileDetails:O,edit:P,user:g,selectedShared:F,selected:a,initialMembers:f,resetMembers:p}){const[m,N]=v.useState(!1),[I,C]=v.useState(!1),[E,D]=v.useState(f),U="membersTable",[B,Q]=v.useState({}),[x,R]=v.useState(g.employmentRoles[0].id),[L,w]=v.useState(!1);v.useEffect(()=>{c&&(D(f),w(!1))},[c]),v.useEffect(()=>{a.current={...a.current,...B}},[B]);function K(s){let _={};Object.values(s).forEach(V=>{F.hasOwnProperty(V.id)||(_[V.id.toString()]=!1)}),a.current={...F,..._}}v.useEffect(()=>{K(E)},[E]);function G(s,_){let V={...a.current,[s]:!a.current[s]},Y=Object.keys(V).filter(S=>V[S]).map(S=>E[S]),te={};for(let S=0;S<Y.length;S++)if(te.hasOwnProperty(Y[S].id)){$.notify("For "+Y[S].email+", please choose one role","info"),_.target.checked=!1;return}else te[Y[S].id]=Y[S];a.current[s]=!a.current[s],Q({[s]:a.current[s]})}function X(){w(!0),axios.get("/users/create?role="+x).then(s=>{if(s.status===200){w(!1);const _=((S={})=>(s.data.roles.forEach(H=>{S[H.id]=H}),S))(),Y=s.data.users.map(S=>({...S,role:_[S.employment_role_id].name})).filter(S=>S.id!==g.id);let te={};Y.forEach((S,H)=>{te[H]=S}),w(!1),K(te),D(te),C(!0),$(document).ready(function(){$("#"+U).DataTable({columnDefs:[{searchable:!1,targets:[3]}]})})}else $.notify("an error occurred")}).catch(s=>{$.notify(s.message)})}function M(){if(h.filename.trim().length===0||h.fileType.trim().length===0)N(!0);else{if(h.id!==null)P();else{let s=Object.keys(a.current).filter(_=>a.current[_]).map(_=>E[_]);axios.post("/reports",{filename:h.filename,fileType:h.fileType,content:getEditAreaHtml(),senderRoleId:x,share:s}).then(_=>{_.status===200?(O({filename:_.data.filename,fileType:_.data.fileType,id:_.data.id}),p(E),$.notify("Saved successfully","success")):$.notify("An error occurred")}).catch(_=>{$.notify(_)})}A()}}function j(s){O({...h,[s.target.name]:s.target.value})}function A(){u(!1),C(!1)}return n(Ke,{onClose:A,show:c,children:l("div",{className:"px-6 py-6",children:[l("label",{className:"mr-2",children:["Enter ",h.fileType.replace(/\b\w/g,s=>s.toUpperCase())," Name"]}),n("input",{name:"filename",type:"text",value:h.filename,onInput:j}),n("br",{}),n("br",{}),!g.isAdminRoute&&l(ne,{children:[l("div",{children:["Saving Report as ",n("select",{name:"saveRole",onChange:s=>R(s.target.value),value:x,disabled:L||Object.values(E).length>0,children:g.employmentRoles.map(s=>n("option",{value:s.id,children:s.name},s.id))})]}),l("button",{className:"inline-flex items-center py-2 border border-transparent",type:"button",onClick:X,disabled:L||Object.values(E).length>0,children:[L&&l("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[n("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n("path",{className:"opacity-75  text-blue-700",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n("span",{className:"hover:text-gray-700 mr-2",children:"Share With:"}),n("span",{children:Object.keys(a.current).filter(s=>a.current[s]).map(s=>E[s].email).toString()})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:U,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",hidden:!I,children:[n("thead",{children:l("tr",{children:[n("th",{children:"Name"}),n("th",{children:"Email"}),n("th",{children:"Role"}),n("th",{children:"Select"})]})}),n("tbody",{children:Object.values(E).map((s,_)=>{let V=s.hasOwnProperty("employment_role_id")?_:s.id;return l("tr",{children:[n("td",{children:s.name}),n("td",{children:s.email}),n("td",{children:s.role}),n("td",{children:n("input",{type:"checkbox",className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500 ",defaultChecked:a.current[V],onChange:Y=>{G([V],Y)}})})]},V)})})]})})})]}),n("span",{className:"text-red-600",hidden:!m,children:"*Please fill all fields"}),l("div",{children:[n("br",{}),n(be,{className:"mr-6",onClick:M,children:"Save"}),n(be,{className:"bg-red-600 hover:bg-red-600",onClick:A,children:"Cancel"})]})]})})}function Kn({user:u}){const[c,h]=v.useState(!1),[O,P]=v.useState(n("tr",{})),g="templatesTable";function F(){axios.get("/templates").then(f=>{f.status===200?(P(f.data.map(p=>l("tr",{children:[n("td",{children:p.filename}),n("td",{children:p.fileType}),n("td",{children:p.created_at}),n("td",{children:p.updated_at}),n("td",{children:n("u",{className:"cursor-pointer",onClick:()=>{a(p.id),$.notify("Loaded "+p.filename,"info")},children:"load"})}),u.isAdminRoute&&n("td",{children:n("u",{className:"cursor-pointer",onClick:()=>{Ae.get("/admin/reports",{reportId:p.id})},children:"edit"})})]},p.id))),h(!0),$(document).ready(function(){$("#"+g).DataTable({columnDefs:[{searchable:!1,targets:[1,4]}]})})):$.notify("an error occurred")}).catch(f=>{$.notify(f.message)})}function a(f){axios.get("/template/"+f).then(p=>{p.status===200?loadData(p.data.content):$.notify("an error occurred")}).catch(p=>{$.notify(p.response.data.message??p)})}return l(ne,{children:[n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:F,children:n("span",{className:"hover:text-gray-700",children:"templates"})})}),c?l(ne,{children:[n("div",{className:"flex overflow-y-auto fixed inset-10 z-50 outline-none focus:outline-none",children:n("div",{className:"relative w-auto my-6 mx-auto",children:l("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[l("div",{className:"flex items-start justify-between p-2 border-b border-solid border-slate-200 rounded-t",children:[n("h3",{className:"text-3xl font-semibold justify-center p-2",children:"Templates"}),n("button",{className:"p-2 ml-auto border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>h(!1),children:n("span",{className:"text-black h-6 w-6 text-4xl block outline-none focus:outline-none",children:"×"})})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:g,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",children:[n("thead",{children:l("tr",{children:[n("th",{children:"Filename"}),n("th",{children:"Type"}),n("th",{children:"Created At"}),n("th",{children:"Updated At"}),n("th",{}),u.isAdminRoute&&n("th",{})]})}),n("tbody",{children:O})]})})})]})})}),n("div",{className:"opacity-25 fixed inset-0 z-40 bg-black",onClick:()=>h(!1)})]}):null]})}function Gn({user:u}){const[c,h]=v.useState(!1),[O,P]=v.useState(!0),[g,F]=v.useState(n("tr",{})),a="reportsTable",[f,p]=v.useState(u.isAdminRoute?l("span",{children:["All Reports",n("span",{className:"ml-2 text-red-600 text-xl",children:"Only edit with permission!"})]}):"Reports");function m(I=route(u.isAdminRoute?"admin.reports.create":"reports.create")){let C=!1;u.isAdminRoute||(C=!I.endsWith("create"),p(C?"Shared With Me":"My Reports")),axios.get(I).then(E=>{E.status===200?(F(E.data.map(D=>l("tr",{children:[n("td",{children:D.filename}),n("td",{children:D.fileType}),n("td",{children:D.created_at}),n("td",{children:D.updated_at}),n("td",{children:n("u",{className:"cursor-pointer",onClick:()=>{Ae.get(u.isAdminRoute?"/admin/reports":"/reports",{reportId:D.id})},children:"view"})})]},D.id))),h(!0),$(document).ready(function(){$("#"+a).DataTable({columnDefs:[{searchable:!1,targets:[1,4]}]})})):$.notify("an error occurred")}).catch(E=>{$.notify(E.response.data.message??E)})}let N=u.isAdminRoute?{onClick:()=>m()}:{onMouseEnter:()=>P(!1),onMouseLeave:()=>P(!0)};return l(ne,{children:[l("div",{className:"relative inline-block text-left",children:[n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",...N,children:n("span",{className:"hover:text-gray-700",children:"reports"})})}),n("div",{className:"absolute right-0 z-10 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabIndex:"-1",hidden:O,onMouseEnter:()=>P(!1),onMouseLeave:()=>P(!0),children:l("div",{className:"py-1",role:"none",children:[n("button",{className:"inline-flex items-center px-4 py-2 border border-transparent",type:"button",onClick:()=>Ae.get("/reports"),children:n("span",{className:"hover:text-gray-700",children:"New"})}),n("br",{}),n("button",{className:"inline-flex items-center px-4 py-2 border border-transparent",type:"button",onClick:()=>m(),children:n("span",{className:"hover:text-gray-700",children:"My Reports"})}),n("br",{}),n("button",{className:"inline-flex items-center px-4 py-2 border border-transparent",type:"button",onClick:()=>m("/reports/shared"),children:n("span",{className:"hover:text-gray-700",children:"Shared with me"})})]})})]}),c?l(ne,{children:[n("div",{className:"flex overflow-y-auto fixed inset-10 z-50 outline-none focus:outline-none",children:n("div",{className:"relative w-auto my-6 mx-auto",children:l("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[l("div",{className:"flex items-start justify-between p-2 border-b border-solid border-slate-200 rounded-t",children:[n("h3",{className:"text-3xl font-semibold justify-center p-2",children:f}),n("button",{className:"p-2 ml-auto border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>h(!1),children:n("span",{className:"text-black h-6 w-6 text-4xl block outline-none focus:outline-none",children:"×"})})]}),n("div",{className:"relative p-6 flex-auto",children:n("div",{className:"w-full",children:l("table",{id:a,"data-order":"[]",className:"cell-border display w-full overflow-y-auto",children:[n("thead",{children:l("tr",{children:[n("th",{children:"Filename"}),n("th",{children:"Type"}),n("th",{children:"Created At"}),n("th",{children:"Updated At"}),n("th",{})]})}),n("tbody",{children:g})]})})})]})})}),n("div",{className:"opacity-25 fixed inset-0 z-40 bg-black",onClick:()=>h(!1)})]}):null]})}function eo({user:u,report:c}){c.id===null&&(c.fileType=u.isAdminRoute?"template":"report");const[h,O]=v.useState({id:c.id,filename:c.filename,fileType:c.fileType}),[P,g]=v.useState(!1),[F,a]=v.useState(!1),[f,p]=v.useState(!1),[m,N]=v.useState(!0),[I,C]=v.useState(c.id!==null),[E,D]=v.useState(null),[U,B]=v.useState(c.hasOwnProperty("users")?Object.fromEntries(new Map(c.users.map(M=>[M.id,!0]))):{}),Q=v.useRef(U),[x,R]=v.useState(c.hasOwnProperty("users")?Object.fromEntries(new Map(c.users.map(M=>[M.id,M]))):{}),L=c.hasOwnProperty("rule")?c.rule.edit:!0;function w(){if(h.filename.trim().length===0||h.fileType.trim().length===0)$.notify("Please enter all fields.");else{let M=Object.keys(Q.current).filter(j=>Q.current[j]).map(j=>x[j]);axios.put("/reports/"+h.id,{filename:h.filename,fileType:h.fileType,content:getEditAreaHtml(),share:M}).then(j=>{j.status===200?(O({filename:j.data.filename,fileType:j.data.fileType,id:j.data.id}),B(Object.fromEntries(new Map(j.data.users.map(A=>[A.id,!0])))),$.notify("Edited successfully","success")):$.notify("An error occurred")}).catch(j=>{$.notify(j.response.data.message??j)}),close()}}function K(M=null){M??(M=!m),editor.ui.view.toolbar.element.style.display=M?"flex":"none",N(M)}v.useEffect(()=>{I?editor.enableReadOnlyMode("lock-all"):editor.disableReadOnlyMode("lock-all")},[I]);function G(){h.id===null?g(!0):w()}function X(){if(!u.isAdminRoute){const M=document.getElementsByClassName("perm-admin"),j=document.getElementsByClassName("perm-supervisor"),A=document.getElementsByClassName("perm-employee");for(let s of M)s.className="perm-admin",s.removeAttribute("role"),s.contentEditable=!1;for(let s of j){let _=u.role==="supervisor";s.contentEditable=_,s.className=_?s.className:"perm-supervisor",_||s.removeAttribute("role")}for(let s of A){let _=u.role==="employee";s.contentEditable=_,s.className=_?s.className:"perm-employee",_||s.removeAttribute("role")}}}return l("div",{className:"bg-white",children:[n("div",{id:"data-exchange",hidden:!0}),n(Qn,{setShowSaveModal:g,showSaveModal:P,fileDetails:h,setFileDetails:O,edit:w,user:u,selected:Q,selectedShared:U,initialMembers:x,resetMembers:R}),n(Hn,{setShowSavePDFModal:a,showSavePDFModal:F,fileDetails:h}),E&&n(Vn,{setShowLockModal:p,showLockModal:f,cell:E}),l("div",{className:"ml-3",children:[n("span",{className:"inline-flex rounded-md mr-6 mt-3",children:c.fileType.replace(/\b\w/g,M=>M.toUpperCase())+" details>"}),l("span",{className:"inline-flex rounded-md mr-6",children:["Name: ",h.filename]}),h.id===null?n("span",{className:"inline-flex rounded-md mr-6",children:"Not saved"}):n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:()=>g(!0),children:n("span",{className:"hover:text-gray-700",children:"Edit Details"})})})]}),l("div",{children:[n("span",{className:"inline-flex rounded-md",children:n(Bn,{onClick:()=>K(),showTools:m})}),n(Ln,{}),n(Gn,{user:u}),n(Kn,{user:u}),n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:()=>a(!0),children:n("span",{className:"hover:text-gray-700",children:"download PDF"})})}),!I&&n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:G,children:n("span",{className:"hover:text-gray-700",children:"Save"})})}),L&&n(qn,{onClick:()=>C(!I),readonly:I}),E&&n("span",{className:"inline-flex rounded-md",children:n("button",{className:"inline-flex items-center px-3 py-2 border border-transparent",type:"button",onClick:()=>p(!0),children:n("span",{className:"hover:text-gray-700 lock-button",children:"Lock"})})})]}),n($n.CKEditor,{editor:ClassicEditor,config:{htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}],disallow:[]}},onReady:M=>{window.loadData=function(j){const A=document.getElementById("data-exchange");A.innerHTML=j,X(),window.editor.setData(A.innerHTML)},window.getEditAreaHtml=function(){const j=document.getElementById("data-exchange");return j.innerHTML=M.ui.view.editable.element.innerHTML,j.querySelectorAll(".ck-table-column-resizer").forEach(A=>{A.remove()}),j.querySelectorAll(".ck-table-bogus-paragraph").forEach(A=>{A.className=A.className.replace("ck-table-bogus-paragraph","");let s=A.children;for(let _=0;_<s.length;_++)s[_].tagName==="BR"&&s[_].remove();A.children.length===0&&A.innerText.length===0&&A.remove()}),j.querySelectorAll("p").forEach(A=>{let s=A.children;s.length>0&&(s[0].tagName==="BR"&&s[0].remove(),A.children.length===0&&A.innerText.length===0&&A.remove())}),j.innerHTML},window.editor=M,M.plugins.get("FileRepository").createUploadAdapter=j=>new Un(j),c.id!==null&&loadData(c.content),u.isAdminRoute&&M.ui.view.editable.element.addEventListener("click",j=>{D(j.target.closest("td")??j.target.closest("th"))})},onFocus:()=>{}})]})}export{eo as E};
